/*! @preserve a11y-dialog 7.3.0 — © Kitty Giraudel */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).A11yDialog=t()}(this,function(){"use strict";var s=['a[href]:not([tabindex^="-"])','area[href]:not([tabindex^="-"])','input:not([type="hidden"]):not([type="radio"]):not([disabled]):not([tabindex^="-"])','input[type="radio"]:not([disabled]):not([tabindex^="-"])','select:not([disabled]):not([tabindex^="-"])','textarea:not([disabled]):not([tabindex^="-"])','button:not([disabled]):not([tabindex^="-"])','iframe:not([tabindex^="-"])','audio[controls]:not([tabindex^="-"])','video[controls]:not([tabindex^="-"])','[contenteditable]:not([tabindex^="-"])','[tabindex]:not([tabindex^="-"])'];function t(e){this._show=this.show.bind(this),this._hide=this.hide.bind(this),this._maintainFocus=this._maintainFocus.bind(this),this._bindKeypress=this._bindKeypress.bind(this),this.$el=e,this.shown=!1,this._id=this.$el.getAttribute("data-a11y-dialog")||this.$el.id,this._previouslyFocused=null,this._listeners={},this.create()}function n(e,t){return e=(t||document).querySelectorAll(e),Array.prototype.slice.call(e)}function i(e){(e.querySelector("[autofocus]")||e).focus()}function e(){n("[data-a11y-dialog]").forEach(function(e){new t(e)})}return t.prototype.create=function(){return this.$el.setAttribute("aria-hidden",!0),this.$el.setAttribute("aria-modal",!0),this.$el.setAttribute("tabindex",-1),this.$el.hasAttribute("role")||this.$el.setAttribute("role","dialog"),this._openers=n('[data-a11y-dialog-show="'+this._id+'"]'),this._openers.forEach(function(e){e.addEventListener("click",this._show)}.bind(this)),this._closers=n("[data-a11y-dialog-hide]",this.$el).concat(n('[data-a11y-dialog-hide="'+this._id+'"]')),this._closers.forEach(function(e){e.addEventListener("click",this._hide)}.bind(this)),this._fire("create"),this},t.prototype.show=function(e){return this.shown||(this._previouslyFocused=document.activeElement,this.$el.removeAttribute("aria-hidden"),this.shown=!0,i(this.$el),document.body.addEventListener("focus",this._maintainFocus,!0),document.addEventListener("keydown",this._bindKeypress),this._fire("show",e)),this},t.prototype.hide=function(e){return this.shown&&(this.shown=!1,this.$el.setAttribute("aria-hidden","true"),this._previouslyFocused&&this._previouslyFocused.focus&&this._previouslyFocused.focus(),document.body.removeEventListener("focus",this._maintainFocus,!0),document.removeEventListener("keydown",this._bindKeypress),this._fire("hide",e)),this},t.prototype.destroy=function(){return this.hide(),this._openers.forEach(function(e){e.removeEventListener("click",this._show)}.bind(this)),this._closers.forEach(function(e){e.removeEventListener("click",this._hide)}.bind(this)),this._fire("destroy"),this._listeners={},this},t.prototype.on=function(e,t){return void 0===this._listeners[e]&&(this._listeners[e]=[]),this._listeners[e].push(t),this},t.prototype.off=function(e,t){t=(this._listeners[e]||[]).indexOf(t);return-1<t&&this._listeners[e].splice(t,1),this},t.prototype._fire=function(e,t){var i=this._listeners[e]||[],e=new CustomEvent(e,{detail:t});this.$el.dispatchEvent(e),i.forEach(function(e){e(this.$el,t)}.bind(this))},t.prototype._bindKeypress=function(e){var t,i;this.$el.contains(document.activeElement)&&(this.shown&&27===e.which&&"alertdialog"!==this.$el.getAttribute("role")&&(e.preventDefault(),this.hide(e)),this.shown&&9===e.which&&(t=this.$el,i=e,e=t,t=n(s.join(","),e).filter(function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}),e=t.indexOf(document.activeElement),i.shiftKey&&0===e?(t[t.length-1].focus(),i.preventDefault()):i.shiftKey||e!==t.length-1||(t[0].focus(),i.preventDefault())))},t.prototype._maintainFocus=function(e){!this.shown||e.target.closest('[aria-modal="true"]')||e.target.closest("[data-a11y-dialog-ignore-focus-trap]")||i(this.$el)},"undefined"!=typeof document&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):window.requestAnimationFrame?window.requestAnimationFrame(e):window.setTimeout(e,16)),t}),function(){"use strict";function x(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function o(e){return e[e.length-1]}function w(t,...e){return e.forEach(e=>{t.includes(e)||t.push(e)}),t}function d(e,t){return e?e.split(t):[]}function c(e,t,i){return(void 0===t||t<=e)&&(void 0===i||e<=i)}function l(e,t,i){return e<t?t:i<e?i:e}function r(e,t,s={},n=0,i=""){i+=`<${Object.keys(s).reduce((e,t)=>{let i=s[t];return"function"==typeof i&&(i=i(n)),`${e} ${t}="${i}"`},e)}></${e}>`;var a=n+1;return a<t?r(e,t,s,a,i):i}function e(e){return e.replace(/>\s+/g,">").replace(/\s+</,"<")}function n(e){return new Date(e).setHours(0,0,0,0)}function m(){return(new Date).setHours(0,0,0,0)}function E(...e){switch(e.length){case 0:return m();case 1:return n(e[0])}const t=new Date(0);return t.setFullYear(...e),t.setHours(0,0,0,0)}function u(e,t){const i=new Date(e);return i.setDate(i.getDate()+t)}function h(e,t){const i=new Date(e),s=i.getMonth()+t;let n=s%12;n<0&&(n+=12);t=i.setMonth(s);return i.getMonth()!==n?i.setDate(0):t}function f(e,t){const i=new Date(e),s=i.getMonth(),n=i.setFullYear(i.getFullYear()+t);return 1===s&&2===i.getMonth()?i.setDate(0):n}function a(e,t){return(e-t+7)%7}function p(e,t,i=0){var s=new Date(e).getDay();return u(e,a(t,i)-a(s,i))}function g(e,t){e=new Date(e).getFullYear();return Math.floor(e/t)*t}function L(e,t,i){if(1!==t&&2!==t)return e;const s=new Date(e);return 1===t?i?s.setMonth(s.getMonth()+1,0):s.setDate(1):i?s.setFullYear(s.getFullYear()+1,0,0):s.setMonth(0,1),s.setHours(0,0,0,0)}const S=/dd?|DD?|mm?|MM?|yy?(?:yy)?/,b=/[\s!-/:-@[-`{-~年月日]+/;let i={};const v={y:(e,t)=>new Date(e).setFullYear(parseInt(t,10)),m(t,e,i){const s=new Date(t);let n=parseInt(e,10)-1;if(isNaN(n)){if(!e)return NaN;const t=e.toLowerCase(),s=e=>e.toLowerCase().startsWith(t);if(n=i.monthsShort.findIndex(s),n<0&&(n=i.months.findIndex(s)),n<0)return NaN}return s.setMonth(n),s.getMonth()!==function e(t){return-1<t?t%12:e(t+12)}(n)?s.setDate(0):s.getTime()},d:(e,t)=>new Date(e).setDate(parseInt(t,10))},s={d:e=>e.getDate(),dd:e=>t(e.getDate(),2),D:(e,t)=>t.daysShort[e.getDay()],DD:(e,t)=>t.days[e.getDay()],m:e=>e.getMonth()+1,mm:e=>t(e.getMonth()+1,2),M:(e,t)=>t.monthsShort[e.getMonth()],MM:(e,t)=>t.months[e.getMonth()],y:e=>e.getFullYear(),yy:e=>t(e.getFullYear(),2).slice(-2),yyyy:e=>t(e.getFullYear(),4)};function t(e,t){return e.toString().padStart(t,"0")}function y(e){if("string"!=typeof e)throw new Error("Invalid date format.");if(e in i)return i[e];const a=e.split(S),n=e.match(new RegExp(S,"g"));if(0===a.length||!n)throw new Error("Invalid date format.");const t=n.map(e=>s[e]),r=Object.keys(v).reduce((e,t)=>(n.find(e=>"D"!==e[0]&&e[0].toLowerCase()===t)&&e.push(t),e),[]);return i[e]={parser(e,i){const s=e.split(b).reduce((e,t,i)=>{return 0<t.length&&n[i]&&("M"===(i=n[i][0])?e.m=t:"D"!==i&&(e[i]=t)),e},{});return r.reduce((e,t)=>{t=v[t](e,s[t],i);return isNaN(t)?e:t},m())},formatter:(s,n)=>t.reduce((e,t,i)=>e+`${a[i]}${t(s,n)}`,"")+o(a)}}function _(e,t,i){if(e instanceof Date||"number"==typeof e){const t=n(e);return isNaN(t)?void 0:t}if(e){if("today"===e)return m();if(t&&t.toValue){var s=t.toValue(e,t,i);return isNaN(s)?void 0:n(s)}return y(t).parser(e,i)}}function D(e,t,i){if(isNaN(e)||!e&&0!==e)return"";e="number"==typeof e?new Date(e):e;return t.toDisplay?t.toDisplay(e,t,i):y(t).formatter(e,i)}const A=document.createRange();function k(e){return A.createContextualFragment(e)}function M(e){return e.parentElement||(e.parentNode instanceof ShadowRoot?e.parentNode.host:void 0)}function T(e){return e.getRootNode().activeElement===e}function C(e){"none"!==e.style.display&&(e.style.display&&(e.dataset.styleDisplay=e.style.display),e.style.display="none")}function O(e){"none"===e.style.display&&(e.dataset.styleDisplay?(e.style.display=e.dataset.styleDisplay,delete e.dataset.styleDisplay):e.style.display="")}function I(e){e.firstChild&&(e.removeChild(e.firstChild),I(e))}const N=new WeakMap,{addEventListener:F,removeEventListener:B}=EventTarget.prototype;function R(e,t){let i=N.get(e);i||(i=[],N.set(e,i)),t.forEach(e=>{F.call(...e),i.push(e)})}function P(e){let t=N.get(e);t&&(t.forEach(e=>{B.call(...e)}),N.delete(e))}if(!Event.prototype.composedPath){const x=(e,t=[])=>{let i;return t.push(e),e.parentNode?i=e.parentNode:e.host?i=e.host:e.defaultView&&(i=e.defaultView),i?x(i,t):t};Event.prototype.composedPath=function(){return x(this.target)}}function H(e,t){var i="function"==typeof t?t:e=>e instanceof Element&&e.matches(t);return function e(t,i,s){var[n,...t]=t;return i(n)?n:n!==s&&"HTML"!==n.tagName&&0!==t.length?e(t,i,s):void 0}(e.composedPath(),i,e.currentTarget)}const V={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM y"}},q={autohide:!1,beforeShowDay:null,beforeShowDecade:null,beforeShowMonth:null,beforeShowYear:null,calendarWeeks:!1,clearBtn:!1,dateDelimiter:",",datesDisabled:[],daysOfWeekDisabled:[],daysOfWeekHighlighted:[],defaultViewDate:void 0,disableTouchKeyboard:!1,format:"mm/dd/yyyy",language:"en",maxDate:null,maxNumberOfDates:1,maxView:3,minDate:null,nextArrow:"»",orientation:"auto",pickLevel:0,prevArrow:"«",showDaysOfWeek:!0,showOnClick:!0,showOnFocus:!0,startView:0,title:"",todayBtn:!1,todayBtnMode:0,todayHighlight:!1,updateOnBlur:!0,weekStart:0},{language:W,format:Y,weekStart:j}=q;function z(e,t){return e.length<6&&0<=t&&t<7?w(e,t):e}function U(e){return(e+6)%7}function $(e,t,i,s){i=_(e,t,i);return void 0!==i?i:s}function J(e,t,i=3){e=parseInt(e,10);return 0<=e&&e<=i?e:t}function G(t,e){const i=Object.assign({},t),s={},n=e.constructor.locales,a=e.rangeSideIndex;let{format:r,language:o,locale:l,maxDate:d,maxView:c,minDate:u,pickLevel:h,startView:f,weekStart:p}=e.config||{};if(i.language){let e;if(i.language!==o&&(n[i.language]?e=i.language:(e=i.language.split("-")[0],void 0===n[e]&&(e=!1))),delete i.language,e){o=s.language=e;const t=l||n[W];l=Object.assign({format:Y,weekStart:j},n[W]),o!==W&&Object.assign(l,n[o]),s.locale=l,r===t.format&&(r=s.format=l.format),p===t.weekStart&&(p=s.weekStart=l.weekStart,s.weekEnd=U(l.weekStart))}}if(i.format){const x="function"==typeof i.format.toDisplay,t="function"==typeof i.format.toValue,w=S.test(i.format);(x&&t||w)&&(r=s.format=i.format),delete i.format}let m=h;void 0!==i.pickLevel&&(m=J(i.pickLevel,2),delete i.pickLevel),m!==h&&(m>h&&(void 0===i.minDate&&(i.minDate=u),void 0===i.maxDate&&(i.maxDate=d)),i.datesDisabled||(i.datesDisabled=[]),h=s.pickLevel=m);let g=u,b=d;if(void 0!==i.minDate){const x=E(0,0,1);g=null===i.minDate?x:$(i.minDate,r,l,g),g!==x&&(g=L(g,h,!1)),delete i.minDate}if(void 0!==i.maxDate&&(b=null===i.maxDate?void 0:$(i.maxDate,r,l,b),void 0!==b&&(b=L(b,h,!0)),delete i.maxDate),b<g?(u=s.minDate=b,d=s.maxDate=g):(u!==g&&(u=s.minDate=g),d!==b&&(d=s.maxDate=b)),i.datesDisabled&&(s.datesDisabled=i.datesDisabled.reduce((e,t)=>{t=_(t,r,l);return void 0!==t?w(e,L(t,h,a)):e},[]),delete i.datesDisabled),void 0!==i.defaultViewDate){const x=_(i.defaultViewDate,r,l);void 0!==x&&(s.defaultViewDate=x),delete i.defaultViewDate}if(void 0!==i.weekStart){const x=Number(i.weekStart)%7;isNaN(x)||(p=s.weekStart=x,s.weekEnd=U(x)),delete i.weekStart}if(i.daysOfWeekDisabled&&(s.daysOfWeekDisabled=i.daysOfWeekDisabled.reduce(z,[]),delete i.daysOfWeekDisabled),i.daysOfWeekHighlighted&&(s.daysOfWeekHighlighted=i.daysOfWeekHighlighted.reduce(z,[]),delete i.daysOfWeekHighlighted),void 0!==i.maxNumberOfDates){const x=parseInt(i.maxNumberOfDates,10);0<=x&&(s.maxNumberOfDates=x,s.multidate=1!==x),delete i.maxNumberOfDates}i.dateDelimiter&&(s.dateDelimiter=String(i.dateDelimiter),delete i.dateDelimiter);let v=c;void 0!==i.maxView&&(v=J(i.maxView,c),delete i.maxView),v=h>v?h:v,v!==c&&(c=s.maxView=v);let y=f;if(void 0!==i.startView&&(y=J(i.startView,y),delete i.startView),y<h?y=h:y>c&&(y=c),y!==f&&(s.startView=y),i.prevArrow){const x=k(i.prevArrow);0<x.childNodes.length&&(s.prevArrow=x.childNodes),delete i.prevArrow}if(i.nextArrow){const x=k(i.nextArrow);0<x.childNodes.length&&(s.nextArrow=x.childNodes),delete i.nextArrow}if(void 0!==i.disableTouchKeyboard&&(s.disableTouchKeyboard="ontouchstart"in document&&!!i.disableTouchKeyboard,delete i.disableTouchKeyboard),i.orientation){const x=i.orientation.toLowerCase().split(/\s+/g);s.orientation={x:x.find(e=>"left"===e||"right"===e)||"auto",y:x.find(e=>"top"===e||"bottom"===e)||"auto"},delete i.orientation}if(void 0!==i.todayBtnMode){switch(i.todayBtnMode){case 0:case 1:s.todayBtnMode=i.todayBtnMode}delete i.todayBtnMode}return Object.keys(i).forEach(e=>{void 0!==i[e]&&x(q,e)&&(s[e]=i[e])}),s}const K=e('<div class="datepicker">\n  <div class="datepicker-picker">\n    <div class="datepicker-header">\n      <div class="datepicker-title"></div>\n      <div class="datepicker-controls">\n        <button type="button" class="%buttonClass% prev-btn"></button>\n        <button type="button" class="%buttonClass% view-switch"></button>\n        <button type="button" class="%buttonClass% next-btn"></button>\n      </div>\n    </div>\n    <div class="datepicker-main"></div>\n    <div class="datepicker-footer">\n      <div class="datepicker-controls">\n        <button type="button" class="%buttonClass% today-btn"></button>\n        <button type="button" class="%buttonClass% clear-btn"></button>\n      </div>\n    </div>\n  </div>\n</div>'),X=e(`<div class="days">\n  <div class="days-of-week">${r("span",7,{class:"dow"})}</div>\n  <div class="datepicker-grid">${r("span",42)}</div>\n</div>`),Z=e(`<div class="calendar-weeks">\n  <div class="days-of-week"><span class="dow"></span></div>\n  <div class="weeks">${r("span",6,{class:"week"})}</div>\n</div>`);class Q{constructor(e,t){Object.assign(this,t,{picker:e,element:k('<div class="datepicker-view"></div>').firstChild,selected:[]}),this.init(this.picker.datepicker.config)}init(e){void 0!==e.pickLevel&&(this.isMinView=this.id===e.pickLevel),this.setOptions(e),this.updateFocus(),this.updateSelection()}performBeforeHook(e,t,i){let s=this.beforeShow(new Date(i));switch(typeof s){case"boolean":s={enabled:s};break;case"string":s={classes:s}}if(s){if(!1===s.enabled&&(e.classList.add("disabled"),w(this.disabled,t)),s.classes){const i=s.classes.split(/\s+/);e.classList.add(...i),i.includes("disabled")&&w(this.disabled,t)}s.content&&(n=e,e=s.content,I(n),e instanceof DocumentFragment?n.appendChild(e):"string"==typeof e?n.appendChild(k(e)):"function"==typeof e.forEach&&e.forEach(e=>{n.appendChild(e)}))}var n}}class ee extends Q{constructor(e){super(e,{id:0,name:"days",cellClass:"day"})}init(e,t=!0){if(t){const e=k(X).firstChild;this.dow=e.firstChild,this.grid=e.lastChild,this.element.appendChild(e)}super.init(e)}setOptions(e){let t;if(x(e,"minDate")&&(this.minDate=e.minDate),x(e,"maxDate")&&(this.maxDate=e.maxDate),e.datesDisabled&&(this.datesDisabled=e.datesDisabled),e.daysOfWeekDisabled&&(this.daysOfWeekDisabled=e.daysOfWeekDisabled,t=!0),e.daysOfWeekHighlighted&&(this.daysOfWeekHighlighted=e.daysOfWeekHighlighted),void 0!==e.todayHighlight&&(this.todayHighlight=e.todayHighlight),void 0!==e.weekStart&&(this.weekStart=e.weekStart,this.weekEnd=e.weekEnd,t=!0),e.locale){const x=this.locale=e.locale;this.dayNames=x.daysMin,this.switchLabelFormat=x.titleFormat,t=!0}if(void 0!==e.beforeShowDay&&(this.beforeShow="function"==typeof e.beforeShowDay?e.beforeShowDay:void 0),void 0!==e.calendarWeeks)if(e.calendarWeeks&&!this.calendarWeeks){const x=k(Z).firstChild;this.calendarWeeks={element:x,dow:x.firstChild,weeks:x.lastChild},this.element.insertBefore(x,this.element.firstChild)}else this.calendarWeeks&&!e.calendarWeeks&&(this.element.removeChild(this.calendarWeeks.element),this.calendarWeeks=null);void 0!==e.showDaysOfWeek&&(e.showDaysOfWeek?(O(this.dow),this.calendarWeeks&&O(this.calendarWeeks.dow)):(C(this.dow),this.calendarWeeks&&C(this.calendarWeeks.dow))),t&&Array.from(this.dow.children).forEach((e,t)=>{t=(this.weekStart+t)%7;e.textContent=this.dayNames[t],e.className=this.daysOfWeekDisabled.includes(t)?"dow disabled":"dow"})}updateFocus(){const e=new Date(this.picker.viewDate),t=e.getFullYear(),i=e.getMonth(),s=E(t,i,1),n=p(s,this.weekStart,this.weekStart);this.first=s,this.last=E(t,i+1,0),this.start=n,this.focused=this.picker.viewDate}updateSelection(){var{dates:e,rangepicker:t}=this.picker.datepicker;this.selected=e,t&&(this.range=t.dates)}render(){this.today=this.todayHighlight?m():void 0,this.disabled=[...this.datesDisabled];const i=D(this.focused,this.switchLabelFormat,this.locale);if(this.picker.setViewSwitchLabel(i),this.picker.setPrevBtnDisabled(this.first<=this.minDate),this.picker.setNextBtnDisabled(this.last>=this.maxDate),this.calendarWeeks){const i=p(this.first,1,1);Array.from(this.calendarWeeks.weeks.children).forEach((e,t)=>{e.textContent=(e=p(u(i,7*t),4,1),t=p(new Date(e).setMonth(0,4),4,1),Math.round((e-t)/6048e5)+1)})}Array.from(this.grid.children).forEach((e,t)=>{const i=e.classList,s=u(this.start,t),n=new Date(s),a=n.getDay();if(e.className=`datepicker-cell ${this.cellClass}`,e.dataset.date=s,e.textContent=n.getDate(),s<this.first?i.add("prev"):s>this.last&&i.add("next"),this.today===s&&i.add("today"),(s<this.minDate||s>this.maxDate||this.disabled.includes(s))&&i.add("disabled"),this.daysOfWeekDisabled.includes(a)&&(i.add("disabled"),w(this.disabled,s)),this.daysOfWeekHighlighted.includes(a)&&i.add("highlighted"),this.range){const[e,t]=this.range;s>e&&s<t&&i.add("range"),s===e&&i.add("range-start"),s===t&&i.add("range-end")}this.selected.includes(s)&&i.add("selected"),s===this.focused&&i.add("focused"),this.beforeShow&&this.performBeforeHook(e,s,s)})}refresh(){const[s,n]=this.range||[];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(e=>{e.classList.remove("range","range-start","range-end","selected","focused")}),Array.from(this.grid.children).forEach(e=>{const t=Number(e.dataset.date),i=e.classList;t>s&&t<n&&i.add("range"),t===s&&i.add("range-start"),t===n&&i.add("range-end"),this.selected.includes(t)&&i.add("selected"),t===this.focused&&i.add("focused")})}refreshFocus(){var e=Math.round((this.focused-this.start)/864e5);this.grid.querySelectorAll(".focused").forEach(e=>{e.classList.remove("focused")}),this.grid.children[e].classList.add("focused")}}function te(e,t){if(e&&e[0]&&e[1]){var[[i,s],[n,e]]=e;return t<i||n<t?void 0:[i===t?s:-1,n===t?e:12]}}class ie extends Q{constructor(e){super(e,{id:1,name:"months",cellClass:"month"})}init(e,t=!0){t&&(this.grid=this.element,this.element.classList.add("months","datepicker-grid"),this.grid.appendChild(k(r("span",12,{"data-month":e=>e})))),super.init(e)}setOptions(e){if(e.locale&&(this.monthNames=e.locale.monthsShort),x(e,"minDate"))if(void 0===e.minDate)this.minYear=this.minMonth=this.minDate=void 0;else{const x=new Date(e.minDate);this.minYear=x.getFullYear(),this.minMonth=x.getMonth(),this.minDate=x.setDate(1)}if(x(e,"maxDate"))if(void 0===e.maxDate)this.maxYear=this.maxMonth=this.maxDate=void 0;else{const x=new Date(e.maxDate);this.maxYear=x.getFullYear(),this.maxMonth=x.getMonth(),this.maxDate=E(this.maxYear,this.maxMonth+1,0)}this.isMinView?e.datesDisabled&&(this.datesDisabled=e.datesDisabled):this.datesDisabled=[],void 0!==e.beforeShowMonth&&(this.beforeShow="function"==typeof e.beforeShowMonth?e.beforeShowMonth:void 0)}updateFocus(){const e=new Date(this.picker.viewDate);this.year=e.getFullYear(),this.focused=e.getMonth()}updateSelection(){const{dates:e,rangepicker:t}=this.picker.datepicker;this.selected=e.reduce((e,t)=>{const i=new Date(t),s=i.getFullYear(),n=i.getMonth();return void 0===e[s]?e[s]=[n]:w(e[s],n),e},{}),t&&t.dates&&(this.range=t.dates.map(e=>{const t=new Date(e);return isNaN(t)?void 0:[t.getFullYear(),t.getMonth()]}))}render(){this.disabled=this.datesDisabled.reduce((e,t)=>{const i=new Date(t);return this.year===i.getFullYear()&&e.push(i.getMonth()),e},[]),this.picker.setViewSwitchLabel(this.year),this.picker.setPrevBtnDisabled(this.year<=this.minYear),this.picker.setNextBtnDisabled(this.year>=this.maxYear);const n=this.selected[this.year]||[],a=this.year<this.minYear||this.year>this.maxYear,r=this.year===this.minYear,o=this.year===this.maxYear,l=te(this.range,this.year);Array.from(this.grid.children).forEach((e,t)=>{const i=e.classList,s=E(this.year,t,1);if(e.className=`datepicker-cell ${this.cellClass}`,this.isMinView&&(e.dataset.date=s),e.textContent=this.monthNames[t],(a||r&&t<this.minMonth||o&&t>this.maxMonth||this.disabled.includes(t))&&i.add("disabled"),l){const[n,a]=l;t>n&&t<a&&i.add("range"),t===n&&i.add("range-start"),t===a&&i.add("range-end")}n.includes(t)&&i.add("selected"),t===this.focused&&i.add("focused"),this.beforeShow&&this.performBeforeHook(e,t,s)})}refresh(){const s=this.selected[this.year]||[],[n,a]=te(this.range,this.year)||[];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(e=>{e.classList.remove("range","range-start","range-end","selected","focused")}),Array.from(this.grid.children).forEach((e,t)=>{const i=e.classList;t>n&&t<a&&i.add("range"),t===n&&i.add("range-start"),t===a&&i.add("range-end"),s.includes(t)&&i.add("selected"),t===this.focused&&i.add("focused")})}refreshFocus(){this.grid.querySelectorAll(".focused").forEach(e=>{e.classList.remove("focused")}),this.grid.children[this.focused].classList.add("focused")}}class se extends Q{constructor(e,t){super(e,t)}init(e,t=!0){t&&(this.navStep=10*this.step,this.beforeShowOption=`beforeShow${t=this.cellClass,[...t].reduce((e,t,i)=>e+(i?t:t.toUpperCase()),"")}`,this.grid=this.element,this.element.classList.add(this.name,"datepicker-grid"),this.grid.appendChild(k(r("span",12)))),super.init(e)}setOptions(e){if(x(e,"minDate")&&(void 0===e.minDate?this.minYear=this.minDate=void 0:(this.minYear=g(e.minDate,this.step),this.minDate=E(this.minYear,0,1))),x(e,"maxDate")&&(void 0===e.maxDate?this.maxYear=this.maxDate=void 0:(this.maxYear=g(e.maxDate,this.step),this.maxDate=E(this.maxYear,11,31))),this.isMinView?e.datesDisabled&&(this.datesDisabled=e.datesDisabled):this.datesDisabled=[],void 0!==e[this.beforeShowOption]){const x=e[this.beforeShowOption];this.beforeShow="function"==typeof x?x:void 0}}updateFocus(){var e=new Date(this.picker.viewDate),t=g(e,this.navStep),i=t+9*this.step;this.first=t,this.last=i,this.start=t-this.step,this.focused=g(e,this.step)}updateSelection(){const{dates:e,rangepicker:t}=this.picker.datepicker;this.selected=e.reduce((e,t)=>w(e,g(t,this.step)),[]),t&&t.dates&&(this.range=t.dates.map(e=>{if(void 0!==e)return g(e,this.step)}))}render(){this.disabled=this.datesDisabled.map(e=>new Date(e).getFullYear()),this.picker.setViewSwitchLabel(`${this.first}-${this.last}`),this.picker.setPrevBtnDisabled(this.first<=this.minYear),this.picker.setNextBtnDisabled(this.last>=this.maxYear),Array.from(this.grid.children).forEach((e,t)=>{const i=e.classList,s=this.start+t*this.step,n=E(s,0,1);if(e.className=`datepicker-cell ${this.cellClass}`,this.isMinView&&(e.dataset.date=n),e.textContent=e.dataset.year=s,0===t?i.add("prev"):11===t&&i.add("next"),(s<this.minYear||s>this.maxYear||this.disabled.includes(s))&&i.add("disabled"),this.range){const[e,t]=this.range;s>e&&s<t&&i.add("range"),s===e&&i.add("range-start"),s===t&&i.add("range-end")}this.selected.includes(s)&&i.add("selected"),s===this.focused&&i.add("focused"),this.beforeShow&&this.performBeforeHook(e,s,n)})}refresh(){const[s,n]=this.range||[];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(e=>{e.classList.remove("range","range-start","range-end","selected","focused")}),Array.from(this.grid.children).forEach(e=>{const t=Number(e.textContent),i=e.classList;t>s&&t<n&&i.add("range"),t===s&&i.add("range-start"),t===n&&i.add("range-end"),this.selected.includes(t)&&i.add("selected"),t===this.focused&&i.add("focused")})}refreshFocus(){var e=Math.round((this.focused-this.start)/this.step);this.grid.querySelectorAll(".focused").forEach(e=>{e.classList.remove("focused")}),this.grid.children[e].classList.add("focused")}}function ne(e,t){var i={date:e.getDate(),viewDate:new Date(e.picker.viewDate),viewId:e.picker.currentView.id,datepicker:e};e.element.dispatchEvent(new CustomEvent(t,{detail:i}))}function ae(e,t){var{minDate:i,maxDate:s}=e.config,{currentView:n,viewDate:a}=e.picker;let r;switch(n.id){case 0:r=h(a,t);break;case 1:r=f(a,t);break;default:r=f(a,t*n.navStep)}r=l(r,i,s),e.picker.changeFocus(r).render()}function re(e){var t=e.picker.currentView.id;t!==e.config.maxView&&e.picker.changeView(t+1).render()}function oe(e){e.config.updateOnBlur?e.update({revert:!0}):e.refresh("input"),e.hide()}function le(e,t){const i=H(t,".datepicker-cell");var s;i&&!i.classList.contains("disabled")&&({id:s,isMinView:t}=e.picker.currentView,t?e.setDate(Number(i.dataset.date)):function(e,t){const i=e.picker,s=new Date(i.viewDate),n=i.currentView.id,a=1===n?h(s,t-s.getMonth()):f(s,t-s.getFullYear());i.changeFocus(a).changeView(n-1).render()}(e,Number(1===s?i.dataset.month:i.dataset.year)))}function de(e){e.preventDefault()}const ce=["left","top","right","bottom"].reduce((e,t)=>(e[t]=`datepicker-orient-${t}`,e),{}),ue=e=>e&&`${e}px`;function he(e,t){if(void 0!==t.title&&(t.title?(e.controls.title.textContent=t.title,O(e.controls.title)):(e.controls.title.textContent="",C(e.controls.title))),t.prevArrow){const x=e.controls.prevBtn;I(x),t.prevArrow.forEach(e=>{x.appendChild(e.cloneNode(!0))})}if(t.nextArrow){const x=e.controls.nextBtn;I(x),t.nextArrow.forEach(e=>{x.appendChild(e.cloneNode(!0))})}if(t.locale&&(e.controls.todayBtn.textContent=t.locale.today,e.controls.clearBtn.textContent=t.locale.clear),void 0!==t.todayBtn&&(t.todayBtn?O:C)(e.controls.todayBtn),x(t,"minDate")||x(t,"maxDate")){const{minDate:x,maxDate:t}=e.datepicker.config;e.controls.todayBtn.disabled=!c(m(),x,t)}void 0!==t.clearBtn&&(t.clearBtn?O:C)(e.controls.clearBtn)}function fe(e){var{dates:t,config:e}=e;return l(0<t.length?o(t):e.defaultViewDate,e.minDate,e.maxDate)}function pe(e,t){const i=new Date(e.viewDate),s=new Date(t),{id:n,year:a,first:r,last:o}=e.currentView,l=s.getFullYear();switch(e.viewDate=t,l!==i.getFullYear()&&ne(e.datepicker,"changeYear"),s.getMonth()!==i.getMonth()&&ne(e.datepicker,"changeMonth"),n){case 0:return t<r||o<t;case 1:return l!==a;default:return l<r||o<l}}function me(e){return window.getComputedStyle(e).direction}class ge{constructor(e){const t=(this.datepicker=e)["config"],i=K.replace(/%buttonClass%/g,t.buttonClass),s=this.element=k(i).firstChild,[n,a,r]=s.firstChild.children,o=n.firstElementChild,[l,d,c]=n.lastElementChild.children,[u,h]=r.firstChild.children,f={title:o,prevBtn:l,viewSwitch:d,nextBtn:c,todayBtn:u,clearBtn:h};this.main=a,this.controls=f;var p=e.inline?"inline":"dropdown";s.classList.add(`datepicker-${p}`),he(this,t),this.viewDate=fe(e),R(e,[[s,"mousedown",de],[a,"click",le.bind(null,e)],[f.viewSwitch,"click",function(e){re(e)}.bind(null,e)],[f.prevBtn,"click",function(e){ae(e,-1)}.bind(null,e)],[f.nextBtn,"click",function(e){ae(e,1)}.bind(null,e)],[f.todayBtn,"click",function(e){const t=e.picker,i=m();if(1===e.config.todayBtnMode){if(e.config.autohide)return void e.setDate(i);e.setDate(i,{render:!1}),t.update()}t.viewDate!==i&&t.changeFocus(i),t.changeView(0).render()}.bind(null,e)],[f.clearBtn,"click",function(e){e.setDate({clear:!0})}.bind(null,e)]]),this.views=[new ee(this),new ie(this),new se(this,{id:2,name:"years",cellClass:"year",step:1}),new se(this,{id:3,name:"decades",cellClass:"decade",step:10})],this.currentView=this.views[t.startView],this.currentView.render(),this.main.appendChild(this.currentView.element),t.container?t.container.appendChild(this.element):e.inputField.after(this.element)}setOptions(t){he(this,t),this.views.forEach(e=>{e.init(t,!1)}),this.currentView.render()}detach(){this.element.remove()}show(){if(!this.active){const{datepicker:t,element:i}=this;var e;t.inline?i.classList.add("active"):((e=me(t.inputField))!==me(M(i))?i.dir=e:i.dir&&i.removeAttribute("dir"),i.style.visiblity="hidden",i.classList.add("active"),this.place(),i.style.visiblity="",t.config.disableTouchKeyboard&&t.inputField.blur()),this.active=!0,ne(t,"show")}}hide(){this.active&&(this.datepicker.exitEditMode(),this.element.classList.remove("active"),this.active=!1,ne(this.datepicker,"hide"))}place(){const{classList:e,offsetParent:t,style:i}=this.element,{config:s,inputField:n}=this.datepicker,{width:a,height:r}=this.element.getBoundingClientRect(),{left:o,top:l,right:d,bottom:c,width:u,height:h}=n.getBoundingClientRect();let{x:f,y:p}=s.orientation,m=o,g=l;if(t!==document.body&&t){const e=t.getBoundingClientRect();m-=e.left-t.scrollLeft,g-=e.top-t.scrollTop}else m+=window.scrollX,g+=window.scrollY;const b=function e(t){t=M(t);if(t!==document.body&&t)return"visible"!==window.getComputedStyle(t).overflow?t:e(t)}(n);let v=0,y=0,{clientWidth:x,clientHeight:w}=document.documentElement;if(b){const e=b.getBoundingClientRect();0<e.top&&(y=e.top),0<e.left&&(v=e.left),e.right<x&&(x=e.right),e.bottom<w&&(w=e.bottom)}let E=0;"auto"===f&&(o<v?(f="left",E=v-o):o+a>x?(f="right",x<d&&(E=x-d)):f="rtl"!==me(n)||d-a<v?"left":"right"),"right"===f&&(m+=u-a),m+=E,"auto"===p&&(p=l-r>y&&c+r>w?"top":"bottom"),"top"===p?g-=r:g+=h,e.remove(...Object.values(ce)),e.add(ce[f],ce[p]),i.left=ue(m),i.top=ue(g)}setViewSwitchLabel(e){this.controls.viewSwitch.textContent=e}setPrevBtnDisabled(e){this.controls.prevBtn.disabled=e}setNextBtnDisabled(e){this.controls.nextBtn.disabled=e}changeView(e){var t=this.currentView,e=this.views[e];return e.id!==t.id&&(this.currentView=e,this._renderMethod="render",ne(this.datepicker,"changeView"),this.main.replaceChild(e.element,t.element)),this}changeFocus(e){return this._renderMethod=pe(this,e)?"render":"refreshFocus",this.views.forEach(e=>{e.updateFocus()}),this}update(){var e=fe(this.datepicker);return this._renderMethod=pe(this,e)?"render":"refresh",this.views.forEach(e=>{e.updateFocus(),e.updateSelection()}),this}render(e=!0){e=e&&this._renderMethod||"render";delete this._renderMethod,this.currentView[e]()}}function be(e,t,i,s){const n=e.picker,a=n.currentView,r=a.step||1;let o,l,d=n.viewDate;switch(a.id){case 0:d=s?u(d,7*i):(t.ctrlKey||t.metaKey?f:u)(d,i),o=u,l=e=>a.disabled.includes(e);break;case 1:d=h(d,s?4*i:i),o=h,l=e=>{const t=new Date(e),{year:i,disabled:s}=a;return t.getFullYear()===i&&s.includes(t.getMonth())};break;default:d=f(d,i*(s?4:1)*r),o=f,l=e=>a.disabled.includes(g(e,r))}d=function e(t,i,s,n,a,r){if(c(t,a,r))return n(t)?e(i(t,s),i,s,n,a,r):t}(d,o,i<0?-r:r,l,a.minDate,a.maxDate),void 0!==d&&n.changeFocus(d).render()}function ve(e,t){return e.map(e=>D(e,t.format,t.locale)).join(t.dateDelimiter)}function ye(e,t,i=!1){const{config:s,dates:n,rangeSideIndex:a}=e;if(0===t.length)return i?[]:void 0;let r=t.reduce((e,t)=>{t=_(t,s.format,s.locale);return void 0===t||(!c(t=L(t,s.pickLevel,a),s.minDate,s.maxDate)||e.includes(t)||s.datesDisabled.includes(t)||!(0<s.pickLevel)&&s.daysOfWeekDisabled.includes(new Date(t).getDay())||e.push(t)),e},[]);return 0!==r.length?(s.multidate&&!i&&(r=r.reduce((e,t)=>(n.includes(t)||e.push(t),e),n.filter(e=>!r.includes(e)))),s.maxNumberOfDates&&r.length>s.maxNumberOfDates?r.slice(-1*s.maxNumberOfDates):r):void 0}function xe(e,t=3,i=!0){const{config:s,picker:n,inputField:a}=e;if(2&t){const e=n.active?s.pickLevel:s.startView;n.update().changeView(e).render(i)}1&t&&a&&(a.value=ve(e.dates,s))}function we(e,t,i){let{clear:s,render:n,autohide:a,revert:r}=i;void 0===n&&(n=!0),n?void 0===a&&(a=e.config.autohide):a=!1;const o=ye(e,t,s);(o||r)&&(o&&o.toString()!==e.dates.toString()?(e.dates=o,xe(e,n?3:1),ne(e,"changeDate")):xe(e,1),a&&e.hide())}class Ee{constructor(e,t={},i){(e.datepicker=this).element=e;const s=this.config=Object.assign({buttonClass:t.buttonClass&&String(t.buttonClass)||"button",container:null,defaultViewDate:m(),maxDate:void 0,minDate:void 0},G(q,this)),n=this.inline="INPUT"!==e.tagName;let a,r;if(n?s.container=e:(t.container&&(s.container=t.container instanceof HTMLElement?t.container:document.querySelector(t.container)),a=this.inputField=e,a.classList.add("datepicker-input")),i){const l=i.inputs.indexOf(a),t=i.datepickers;if(l<0||1<l||!Array.isArray(t))throw Error("Invalid rangepicker object.");t[l]=this,Object.defineProperty(this,"rangepicker",{get:()=>i}),Object.defineProperty(this,"rangeSideIndex",{get:()=>l})}this._options=t,Object.assign(s,G(t,this)),n?(r=d(e.dataset.date,s.dateDelimiter),delete e.dataset.date):r=d(a.value,s.dateDelimiter),this.dates=[];e=ye(this,r);e&&0<e.length&&(this.dates=e),a&&(a.value=ve(this.dates,s));const o=this.picker=new ge(this);if(n)this.show();else{const l=function(e,t){const{element:i,picker:s}=e;if(s.active||T(i)){const n=s.element;H(t,e=>e===i||e===n)||oe(e)}}.bind(null,this);R(this,[[a,"keydown",function(e,t){var i=t.key;if("Tab"!==i){const s=e.picker,{id:n,isMinView:a}=s.currentView;if(s.active){if(e.editMode)return void("Enter"===i?e.exitEditMode({update:!0,autohide:e.config.autohide}):"Escape"===i&&s.hide());if("ArrowLeft"===i)if(t.ctrlKey||t.metaKey)ae(e,-1);else{if(t.shiftKey)return void e.enterEditMode();be(e,t,-1,!1)}else if("ArrowRight"===i)if(t.ctrlKey||t.metaKey)ae(e,1);else{if(t.shiftKey)return void e.enterEditMode();be(e,t,1,!1)}else if("ArrowUp"===i)if(t.ctrlKey||t.metaKey)re(e);else{if(t.shiftKey)return void e.enterEditMode();be(e,t,-1,!0)}else if("ArrowDown"===i){if(t.shiftKey&&!t.ctrlKey&&!t.metaKey)return void e.enterEditMode();be(e,t,1,!0)}else{if("Enter"!==i)return void("Escape"===i?s.hide():"Backspace"!==i&&"Delete"!==i&&(1!==i.length||t.ctrlKey||t.metaKey)||e.enterEditMode());if(a)return void e.setDate(s.viewDate);s.changeView(n-1).render()}}else{if("ArrowDown"!==i)return void("Enter"===i?e.update():"Escape"===i&&s.show());s.show()}t.preventDefault()}else oe(e)}.bind(null,this)],[a,"focus",function(e){e.config.showOnFocus&&!e._showing&&e.show()}.bind(null,this)],[a,"mousedown",function(e,t){const i=t.target;(e.picker.active||e.config.showOnClick)&&(i._active=T(i),i._clicking=setTimeout(()=>{delete i._active,delete i._clicking},2e3))}.bind(null,this)],[a,"click",function(e,t){const i=t.target;i._clicking&&(clearTimeout(i._clicking),delete i._clicking,i._active&&e.enterEditMode(),delete i._active,e.config.showOnClick&&e.show())}.bind(null,this)],[a,"paste",function(e,t){t.clipboardData.types.includes("text/plain")&&e.enterEditMode()}.bind(null,this)],[document,"mousedown",l],[document,"touchstart",l],[window,"resize",o.place.bind(o)]])}}static formatDate(e,t,i){return D(e,t,i&&V[i]||V.en)}static parseDate(e,t,i){return _(e,t,i&&V[i]||V.en)}static get locales(){return V}get active(){return!(!this.picker||!this.picker.active)}get pickerElement(){return this.picker?this.picker.element:void 0}setOptions(e){const t=this.picker,i=G(e,this);Object.assign(this._options,e),Object.assign(this.config,i),t.setOptions(i),xe(this,3)}show(){if(this.inputField){if(this.inputField.disabled)return;T(this.inputField)||this.config.disableTouchKeyboard||(this._showing=!0,this.inputField.focus(),delete this._showing)}this.picker.show()}hide(){this.inline||(this.picker.hide(),this.picker.update().changeView(this.config.startView).render())}destroy(){return this.hide(),P(this),this.picker.detach(),this.inline||this.inputField.classList.remove("datepicker-input"),delete this.element.datepicker,this}getDate(t){const e=t?e=>D(e,t,this.config.locale):e=>new Date(e);return this.config.multidate?this.dates.map(e):0<this.dates.length?e(this.dates[0]):void 0}setDate(...e){const t=[...e],i={},s=o(e);"object"!=typeof s||Array.isArray(s)||s instanceof Date||!s||Object.assign(i,t.pop()),we(this,Array.isArray(t[0])?t[0]:t,i)}update(e){this.inline||(e=Object.assign(e||{},{clear:!0,render:!0}),we(this,d(this.inputField.value,this.config.dateDelimiter),e))}refresh(e,t=!1){e&&"string"!=typeof e&&(t=e,e=void 0),xe(this,"picker"===e?2:"input"===e?1:3,!t)}enterEditMode(){this.inline||!this.picker.active||this.editMode||(this.editMode=!0,this.inputField.classList.add("in-edit"))}exitEditMode(e){!this.inline&&this.editMode&&(e=Object.assign({update:!1},e),delete this.editMode,this.inputField.classList.remove("in-edit"),e.update&&this.update(e))}}function Le(e){const t=Object.assign({},e);return delete t.inputs,delete t.allowOneSidedRange,delete t.maxNumberOfDates,t}function Se(e,t,i,s){R(e,[[i,"changeDate",t]]),new Ee(i,s,e)}function _e(e,t){if(!e._updating){e._updating=!0;t=t.target;if(void 0!==t.datepicker){const i=e.datepickers,s={render:!1},n=e.inputs.indexOf(t),a=0===n?1:0,r=i[n].dates[0],o=i[a].dates[0];void 0!==r&&void 0!==o?0===n&&o<r?(i[0].setDate(o,s),i[1].setDate(r,s)):1===n&&r<o&&(i[0].setDate(r,s),i[1].setDate(o,s)):e.allowOneSidedRange||void 0===r&&void 0===o||(s.clear=!0,i[a].setDate(i[n].dates,s)),i[0].picker.update().render(),i[1].picker.update().render(),delete e._updating}}}window.Datepicker=Ee,window.DateRangePicker=class{constructor(e,t={}){const i=Array.isArray(t.inputs)?t.inputs:Array.from(e.querySelectorAll("input"));if(!(i.length<2)){(e.rangepicker=this).element=e,this.inputs=i.slice(0,2),this.allowOneSidedRange=!!t.allowOneSidedRange;const s=_e.bind(null,this),n=Le(t),a=[];Object.defineProperty(this,"datepickers",{get:()=>a}),Se(this,s,this.inputs[0],n),Se(this,s,this.inputs[1],n),Object.freeze(a),0<a[0].dates.length?_e(this,{target:this.inputs[0]}):0<a[1].dates.length&&_e(this,{target:this.inputs[1]})}}get dates(){return 2===this.datepickers.length?[this.datepickers[0].dates[0],this.datepickers[1].dates[0]]:void 0}setOptions(e){this.allowOneSidedRange=!!e.allowOneSidedRange;e=Le(e);this.datepickers[0].setOptions(e),this.datepickers[1].setOptions(e)}destroy(){this.datepickers[0].destroy(),this.datepickers[1].destroy(),P(this),delete this.element.rangepicker}getDates(t){const i=t?e=>D(e,t,this.datepickers[0].config.locale):e=>new Date(e);return this.dates.map(e=>void 0===e?e:i(e))}setDates(e,t){const[i,s]=this.datepickers,n=this.dates;this._updating=!0,i.setDate(e),s.setDate(t),delete this._updating,s.dates[0]!==n[1]?_e(this,{target:this.inputs[1]}):i.dates[0]!==n[0]&&_e(this,{target:this.inputs[0]})}}}(),Datepicker.locales.de={days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],daysShort:["So","Mo","Di","Mi","Do","Fr","Sa"],daysMin:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthsShort:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],today:"Heute",monthsTitle:"Monate",clear:"Löschen",weekStart:1,format:"dd.mm.yyyy"};"use strict";const MAIN_BLOCK="dual-listbox",CONTAINER_ELEMENT="dual-listbox__container",AVAILABLE_ELEMENT="dual-listbox__available",SELECTED_ELEMENT="dual-listbox__selected",TITLE_ELEMENT="dual-listbox__title",ITEM_ELEMENT="dual-listbox__item",BUTTONS_ELEMENT="dual-listbox__buttons",BUTTON_ELEMENT="dual-listbox__button",SEARCH_ELEMENT="dual-listbox__search",SELECTED_MODIFIER="dual-listbox__item--selected";class DualListbox{constructor(e,t={}){this.setDefaults(),this.selected=[],this.available=[],DualListbox.isDomElement(e)?this.select=e:this.select=document.querySelector(e),this._initOptions(t),this._initReusableElements(),this._splitOptions(this.select.options),void 0!==t.options&&this._splitOptions(t.options),this._buildDualListbox(this.select.parentNode),this._addActions(),this.redraw()}setDefaults(){this.addEvent=null,this.removeEvent=null,this.availableTitle="Available options",this.selectedTitle="Selected options",this.showAddButton=!0,this.addButtonText=window.OAP.labels.JSLABEL_DUALLIST_ADD||"add",this.showRemoveButton=!0,this.removeButtonText=window.OAP.labels.JSLABEL_DUALLIST_REMOVE||"remove",this.showAddAllButton=!0,this.addAllButtonText=window.OAP.labels.JSLABEL_DUALLIST_ADD_ALL||"add all",this.showRemoveAllButton=!0,this.removeAllButtonText=window.OAP.labels.JSLABEL_DUALLIST_REMOVE_ALL||"remove all",this.searchPlaceholder=window.OAP.labels.JSLABEL_DUALLIST_SEARCH||"search"}addEventListener(e,t){this.dualListbox.addEventListener(e,t)}addSelected(t){var e=this.available.indexOf(t);let i=this.dualListbox.nextSibling.nextSibling;-1<e&&(this.available.splice(e,1),this.selected.push(t),this._selectOption(t.dataset.id),this.redraw(),i.style.display="none",setTimeout(()=>{let e=document.createEvent("HTMLEvents");e.initEvent("added",!1,!0),e.addedElement=t,this.dualListbox.dispatchEvent(e)},0))}redraw(){this.updateAvailableListbox(),this.updateSelectedListbox()}removeSelected(t){var e=this.selected.indexOf(t);let i=this.dualListbox.nextSibling.nextSibling;-1<e&&(this.selected.splice(e,1),this.available.push(t),this._deselectOption(t.dataset.id),this.redraw(),i.style.display="block",setTimeout(()=>{let e=document.createEvent("HTMLEvents");e.initEvent("removed",!1,!0),e.removedElement=t,this.dualListbox.dispatchEvent(e)},0)),0===this.selected.length&&(this.select.value="")}searchLists(e,t){var i=t.querySelectorAll(`.${ITEM_ELEMENT}`),s=e.toLowerCase();for(let t=0;t<i.length;t++){let e=i[t];-1===e.textContent.toLowerCase().indexOf(s)?e.style.display="none":e.style.display="list-item"}}updateAvailableListbox(){this._updateListbox(this.availableList,this.available)}updateSelectedListbox(){this._updateListbox(this.selectedList,this.selected)}_actionAllSelected(e){e.preventDefault();let t=this.available.filter(e=>"none"!==e.style.display);t.forEach(e=>this.addSelected(e))}_updateListbox(t,i){for(;t.firstChild;)t.removeChild(t.firstChild);for(let e=0;e<i.length;e++){var s=i[e];t.appendChild(s)}}_actionItemSelected(e){e.preventDefault();e=this.dualListbox.querySelector(`.${SELECTED_MODIFIER}`);e&&this.addSelected(e)}_actionAllDeselected(e){e.preventDefault();let t=this.selected.filter(e=>"none"!==e.style.display);t.forEach(e=>this.removeSelected(e))}_actionItemDeselected(e){e.preventDefault();e=this.dualListbox.querySelector(`.${SELECTED_MODIFIER}`);e&&this.removeSelected(e)}_actionItemDoubleClick(e,t=null){t&&(t.preventDefault(),t.stopPropagation()),-1<this.selected.indexOf(e)?this.removeSelected(e):this.addSelected(e)}_actionItemClick(i,e,t=null){t&&t.preventDefault();var s=e.querySelectorAll(`.${ITEM_ELEMENT}`);for(let t=0;t<s.length;t++){let e=s[t];e!==i&&e.classList.remove(SELECTED_MODIFIER)}i.classList.contains(SELECTED_MODIFIER)?i.classList.remove(SELECTED_MODIFIER):i.classList.add(SELECTED_MODIFIER)}_addActions(){this._addButtonActions(),this._addSearchActions()}_addButtonActions(){this.add_all_button.addEventListener("click",e=>this._actionAllSelected(e)),this.add_button.addEventListener("click",e=>this._actionItemSelected(e)),this.remove_button.addEventListener("click",e=>this._actionItemDeselected(e)),this.remove_all_button.addEventListener("click",e=>this._actionAllDeselected(e))}_addClickActions(t){return t.addEventListener("dblclick",e=>this._actionItemDoubleClick(t,e)),t.addEventListener("click",e=>this._actionItemClick(t,this.dualListbox,e)),t}_addSearchActions(){this.search_left.addEventListener("change",e=>this.searchLists(e.target.value,this.availableList)),this.search_left.addEventListener("keyup",e=>this.searchLists(e.target.value,this.availableList)),this.search_right.addEventListener("change",e=>this.searchLists(e.target.value,this.selectedList)),this.search_right.addEventListener("keyup",e=>this.searchLists(e.target.value,this.selectedList))}_buildDualListbox(e){this.select.style.display="none",this.dualListBoxContainer.appendChild(this._createList(this.search_left,this.availableListTitle,this.availableList)),this.dualListBoxContainer.appendChild(this.buttons),this.dualListBoxContainer.appendChild(this._createList(this.search_right,this.selectedListTitle,this.selectedList)),this.dualListbox.appendChild(this.dualListBoxContainer),e.insertBefore(this.dualListbox,this.select)}_createList(e,t,i){let s=document.createElement("div");return s.appendChild(e),s.appendChild(t),s.appendChild(i),s}_createButtons(){this.buttons=document.createElement("div"),this.buttons.classList.add(BUTTONS_ELEMENT),this.add_all_button=document.createElement("button"),this.add_all_button.innerHTML=this.addAllButtonText,this.add_button=document.createElement("button"),this.add_button.innerHTML=this.addButtonText,this.remove_button=document.createElement("button"),this.remove_button.innerHTML=this.removeButtonText,this.remove_all_button=document.createElement("button"),this.remove_all_button.innerHTML=this.removeAllButtonText;var e,t={showAddAllButton:this.add_all_button,showAddButton:this.add_button,showRemoveButton:this.remove_button,showRemoveAllButton:this.remove_all_button};for(e in t)if(e){var i=this[e];const s=t[e];s.setAttribute("type","button"),s.classList.add(BUTTON_ELEMENT),i&&this.buttons.appendChild(s)}}_createListItem(e){let t=document.createElement("li");return t.classList.add(ITEM_ELEMENT),t.innerHTML=e.text.replace(/\|/g,"<br>"),t.dataset.id=e.value,this._addClickActions(t),t}_createSearchLeft(){this.search_left=document.createElement("input"),this.search_left.classList.add(SEARCH_ELEMENT),this.search_left.placeholder=this.searchPlaceholder}_createSearchRight(){this.search_right=document.createElement("input"),this.search_right.classList.add(SEARCH_ELEMENT),this.search_right.placeholder=this.searchPlaceholder}_deselectOption(i){var s=this.select.options;for(let t=0;t<s.length;t++){let e=s[t];e.value===i&&(e.selected=!1,e.removeAttribute("selected"))}this.removeEvent&&this.removeEvent(i)}_initOptions(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])}_initReusableElements(){this.dualListbox=document.createElement("div"),this.dualListbox.classList.add(MAIN_BLOCK),this.select.id&&this.dualListbox.classList.add(this.select.id),this.dualListBoxContainer=document.createElement("div"),this.dualListBoxContainer.classList.add(CONTAINER_ELEMENT),this.availableList=document.createElement("ul"),this.availableList.classList.add(AVAILABLE_ELEMENT),this.selectedList=document.createElement("ul"),this.selectedList.classList.add(SELECTED_ELEMENT),this.availableListTitle=document.createElement("div"),this.availableListTitle.classList.add(TITLE_ELEMENT),this.availableListTitle.innerText=this.availableTitle,this.selectedListTitle=document.createElement("div"),this.selectedListTitle.classList.add(TITLE_ELEMENT),this.selectedListTitle.innerText=this.selectedTitle,this._createButtons(),this._createSearchLeft(),this._createSearchRight()}_selectOption(i){var s=this.select.options;for(let t=0;t<s.length;t++){let e=s[t];e.value===i&&(e.selected=!0,e.setAttribute("selected",""))}this.addEvent&&this.addEvent(i)}_splitOptions(t){for(let e=0;e<t.length;e++){var i=t[e];DualListbox.isDomElement(i)?this._addOption({text:i.innerHTML,value:i.value,selected:i.attributes.selected}):this._addOption(i)}}_addOption(e){var t=this._createListItem(e);(e.selected?this.selected:this.available).push(t)}static isDomElement(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}}!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i,s=t();for(i in s)("object"==typeof exports?exports:e)[i]=s[i]}}(window,function(){return i=[function(e,t,i){i.r(t);var Z="fslightbox-",i="".concat(Z,"styles"),o="".concat(Z,"cursor-grabbing"),Q="".concat(Z,"full-dimension"),c="".concat(Z,"flex-centered"),b="".concat(Z,"open"),u="".concat(Z,"transform-transition"),ee="".concat(Z,"absoluted"),r="".concat(Z,"slide-btn"),l="".concat(r,"-container"),te="".concat(Z,"fade-in"),ie="".concat(Z,"fade-out"),se=te+"-strong",h=ie+"-strong",t="".concat(Z,"opacity-"),f="".concat(t,"1"),d="".concat(Z,"source");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(e){var i,t=e.props,s=0,n={};this.getSourceTypeFromLocalStorageByUrl=function(e){return i[e]||a(e)},this.handleReceivedSourceTypeForUrl=function(e,t){if(!1===n[t]&&(s--,"invalid"!==e?n[t]=e:delete n[t],0===s)){!function(e,t){for(var i in t)e[i]=t[i]}(i,n);try{localStorage.setItem("fslightbox-types",JSON.stringify(i))}catch(e){}}};var a=function(e){s++,n[e]=!1};if(t.disableLocalStorage)this.getSourceTypeFromLocalStorageByUrl=function(){},this.handleReceivedSourceTypeForUrl=function(){};else{try{i=JSON.parse(localStorage.getItem("fslightbox-types"))}catch(e){}i||(i={},this.getSourceTypeFromLocalStorageByUrl=a)}}function p(e,t,i,s){var n=e.data,a=e.elements.sources,r=i/s,o=0;this.adjustSize=function(){if((o=n.maxSourceWidth/r)<n.maxSourceHeight)return i<n.maxSourceWidth&&(o=s),l();o=s>n.maxSourceHeight?n.maxSourceHeight:s,l()};var l=function(){a[t].style.width=o*r+"px",a[t].style.height=o+"px"}}function m(e,i){var s=this,n=e.collections.sourceSizers,t=e.elements,a=t.sourceAnimationWrappers,r=t.sources,o=e.isl,l=e.resolve;function d(e,t){n[i]=l(p,[i,e,t]),n[i].adjustSize()}this.runActions=function(e,t){o[i]=!0,r[i].classList.add(f),a[i].classList.add(se),a[i].removeChild(a[i].firstChild),d(e,t),s.runActions=d}}function g(e,i){var s,n=this,a=e.elements.sources,r=e.props,o=(0,e.resolve)(m,[i]);this.handleImageLoad=function(e){var t=e.target,e=t.naturalWidth,t=t.naturalHeight;o.runActions(e,t)},this.handleVideoLoad=function(e){var t=e.target,e=t.videoWidth,t=t.videoHeight;s=!0,o.runActions(e,t)},this.handleNotMetaDatedVideoLoad=function(){s||n.handleYoutubeLoad()},this.handleYoutubeLoad=function(){var e=1920,t=1080;r.maxYoutubeDimensions&&(e=r.maxYoutubeDimensions.width,t=r.maxYoutubeDimensions.height),o.runActions(e,t)},this.handleCustomLoad=function(){var e=a[i],t=e.offsetWidth,e=e.offsetHeight;t&&e?o.runActions(t,e):setTimeout(n.handleCustomLoad)}}function v(e,t,i){var s=e.elements.sources,e=e.props.customClasses,e=e[t]||"";s[t].className=i+" "+e}function y(e,t){var i,s=e.elements.sources,n=e.props.customAttributes;for(i in n[t])s[t].setAttribute(i,n[t][i])}function x(e,t){var i=e.collections.sourceLoadHandlers,s=e.elements,n=s.sources,a=s.sourceAnimationWrappers,s=e.props.sources;n[t]=document.createElement("img"),v(e,t,d),n[t].src=s[t],n[t].onload=i[t].handleImageLoad,y(e,t),a[t].appendChild(n[t])}function w(e,t){var i=e.collections.sourceLoadHandlers,s=e.elements,n=s.sources,a=s.sourceAnimationWrappers,r=e.props,s=r.sources,r=r.videosPosters;n[t]=document.createElement("video"),v(e,t,d),n[t].src=s[t],n[t].onloadedmetadata=function(e){i[t].handleVideoLoad(e)},n[t].controls=!0,y(e,t),r[t]&&(n[t].poster=r[t]);r=document.createElement("source");r.src=s[t],n[t].appendChild(r),setTimeout(i[t].handleNotMetaDatedVideoLoad,3e3),a[t].appendChild(n[t])}function E(e,t){var i=e.collections.sourceLoadHandlers,s=e.elements,n=s.sources,a=s.sourceAnimationWrappers,r=e.props.sources;n[t]=document.createElement("iframe"),v(e,t,"".concat(d," ").concat(Z,"youtube-iframe"));s=r[t],r=s.split("?")[1];n[t].src="https://www.youtube.com/embed/".concat(s.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/)[2],"?").concat(r||""),n[t].allowFullscreen=!0,y(e,t),a[t].appendChild(n[t]),i[t].handleYoutubeLoad()}function L(e,t){var i=e.collections.sourceLoadHandlers,s=e.elements,n=s.sources,a=s.sourceAnimationWrappers,s=e.props.sources;n[t]=s[t],v(e,t,"".concat(n[t].className," ").concat(d)),a[t].appendChild(n[t]),i[t].handleCustomLoad()}function S(e,t){var i=e.elements,s=i.sources,i=i.sourceAnimationWrappers;e.props.sources,s[t]=document.createElement("div"),s[t].className="".concat(Z,"invalid-file-wrapper ").concat(c),s[t].innerHTML="Invalid source",i[t].classList.add(se),i[t].removeChild(i[t].firstChild),i[t].appendChild(s[t])}function ae(s){var e=s.collections,n=e.sourceLoadHandlers,a=e.sourcesRenderFunctions,r=s.core.sourceDisplayFacade,o=s.resolve;this.runActionsForSourceTypeAndIndex=function(e,t){var i;switch("invalid"!==e&&(n[t]=o(g,[t])),e){case"image":i=x;break;case"video":i=w;break;case"youtube":i=E;break;case"custom":i=L;break;default:i=S}a[t]=function(){return i(s,t)},r.displaySourcesWhichShouldBeDisplayed()}}function _(){var t,i,s,n=function(e){var t=document.createElement("a");return t.href=e,"www.youtube.com"===t.hostname||"youtu.be"===t.hostname},a=function(e){return e.slice(0,e.indexOf("/"))};function r(){if(4!==s.readyState){if(2===s.readyState){var e;switch(a(s.getResponseHeader("content-type"))){case"image":e="image";break;case"video":e="video";break;default:e="invalid"}s.onreadystatechange=null,s.abort(),i(e)}}else i("invalid")}this.setUrlToCheck=function(e){t=e},this.getSourceType=function(e){if(n(t))return e("youtube");i=e,(s=new XMLHttpRequest).onreadystatechange=r,s.open("GET",t,!0),s.send()}}function re(e,i,s){var t=e.props,n=t.types,a=t.type,r=t.sources,o=e.resolve;this.getTypeSetByClientForIndex=function(e){var t;return n&&n[e]?t=n[e]:a&&(t=a),t},this.retrieveTypeWithXhrForIndex=function(t){var e=o(_);e.setUrlToCheck(r[t]),e.getSourceType(function(e){i.handleReceivedSourceTypeForUrl(e,r[t]),s.runActionsForSourceTypeAndIndex(e,t)})}}function oe(o,e){var t=o.core.stageManager,i=o.elements,s=i.smw,i=i.sourceWrappersContainer,n=o.props,a=0,r=document.createElement("div");function l(e){r.style.transform="translateX(".concat(e+a,"px)"),a=0}function d(){return(1+n.slideDistance)*innerWidth}r.className="".concat(ee," ").concat(Q," ").concat(c),r.s=function(){r.style.display="flex"},r.h=function(){r.style.display="none"},r.a=function(){r.classList.add(u)},r.d=function(){r.classList.remove(u)},r.n=function(){r.style.removeProperty("transform")},r.v=function(e){return a=e,r},r.ne=function(){l(-d())},r.z=function(){l(0)},r.p=function(){l(d())},t.i(e)||r.h(),s[e]=r,i.appendChild(r),function(e){var t=o.elements,i=t.smw,s=t.sourceAnimationWrappers,t=document.createElement("div"),n=document.createElement("div");n.className="fslightboxl";for(var a=0;a<3;a++){var r=document.createElement("div");n.appendChild(r)}t.appendChild(n),i[e].appendChild(t),s[e]=t}(e)}function D(e,t,i,s){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttributeNS(null,"width",t),n.setAttributeNS(null,"height",t),n.setAttributeNS(null,"viewBox",i);i=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttributeNS(null,"class","".concat(Z,"svg-path")),i.setAttributeNS(null,"d",s),n.appendChild(i),e.appendChild(n),n}function A(e,t){var i=document.createElement("div");return i.className="".concat(Z,"toolbar-button ").concat(c),i.title=t,e.appendChild(i),i}function n(r,e){var t,o=document.createElement("div");o.className="".concat(Z,"toolbar"),e.appendChild(o),function(){var e=r.componentsServices,t=r.data,i=r.fs,s="M4.5 11H3v4h4v-1.5H4.5V11zM3 7h1.5V4.5H7V3H3v4zm10.5 6.5H11V15h4v-4h-1.5v2.5zM11 3v1.5h2.5V7H15V3h-4z",n=A(o);n.title="Enter fullscreen";var a=D(n,"20px","0 0 18 18",s);e.ofs=function(){t.ifs=!0,n.title="Exit fullscreen",a.setAttributeNS(null,"width","24px"),a.setAttributeNS(null,"height","24px"),a.setAttributeNS(null,"viewBox","0 0 950 1024"),a.firstChild.setAttributeNS(null,"d","M682 342h128v84h-212v-212h84v128zM598 810v-212h212v84h-128v128h-84zM342 342v-128h84v212h-212v-84h128zM214 682v-84h212v212h-84v-128h-128z")},e.xfs=function(){t.ifs=!1,n.title="Enter fullscreen",a.setAttributeNS(null,"width","20px"),a.setAttributeNS(null,"height","20px"),a.setAttributeNS(null,"viewBox","0 0 18 18"),a.firstChild.setAttributeNS(null,"d",s)},n.onclick=i.t}(),t=r,(e=A(o,"Close")).onclick=t.core.lightboxCloser.closeLightbox,D(e,"20px","0 0 24 24","M 4.7070312 3.2929688 L 3.2929688 4.7070312 L 10.585938 12 L 3.2929688 19.292969 L 4.7070312 20.707031 L 12 13.414062 L 19.292969 20.707031 L 20.707031 19.292969 L 13.414062 12 L 20.707031 4.7070312 L 19.292969 3.2929688 L 12 10.585938 L 4.7070312 3.2929688 z")}function le(o){var e=o.props.sources,t=o.elements.container,i=document.createElement("div");i.className="".concat(Z,"nav"),t.appendChild(i),n(o,i),1<e.length&&function(e){var t=o.componentsServices,i=o.props.sources,s=(o.stageIndexes,document.createElement("div"));s.className="".concat(Z,"slide-number-container");var n=document.createElement("div");n.className=c;var a=document.createElement("span");t.setSlideNumber=function(e){return a.innerHTML=e};var r=document.createElement("span");r.className="".concat(Z,"slash");t=document.createElement("div");t.innerHTML=i.length,s.appendChild(n),n.appendChild(a),n.appendChild(r),n.appendChild(t),e.appendChild(s),setTimeout(function(){55<n.offsetWidth&&(s.style.justifyContent="flex-start")})}(i)}function de(e,t,i,s){var n=e.elements.container,a=i.charAt(0).toUpperCase()+i.slice(1),e=document.createElement("div");e.className="".concat(l," ").concat(l,"-").concat(i),e.title="".concat(a," slide"),e.onclick=t,a=e,t=s,(s=document.createElement("div")).className="".concat(r," ").concat(c),D(s,"20px","0 0 20 20",t),a.appendChild(s),n.appendChild(e)}function ce(e){var t=e.core,i=t.lightboxCloser,s=t.slideChangeFacade,n=e.fs;this.listener=function(e){switch(e.key){case"Escape":i.closeLightbox();break;case"ArrowLeft":s.changeToPrevious();break;case"ArrowRight":s.changeToNext();break;case"F11":e.preventDefault(),n.t()}}}function a(e){var s=e.elements,n=e.sourcePointerProps,a=e.stageIndexes;function r(e,t){s.smw[e].v(n.swipedX)[t]()}this.runActionsForEvent=function(e){var t;s.container.contains(s.slideSwipingHoverer)||s.container.appendChild(s.slideSwipingHoverer),(t=s.container.classList).contains(i=o)||t.add(i),n.swipedX=e.screenX-n.downScreenX;var i=a.previous,e=a.next;r(a.current,"z"),void 0!==i&&0<n.swipedX?r(i,"ne"):void 0!==e&&n.swipedX<0&&r(e,"p")}}function ue(e){var t=e.props.sources,i=e.resolve,s=e.sourcePointerProps,n=i(a);1===t.length?this.listener=function(){s.swipedX=1}:this.listener=function(e){s.isPointering&&n.runActionsForEvent(e)}}function k(e){var i=e.core.slideIndexChanger,s=e.elements.smw,n=e.stageIndexes,a=e.sws;function r(e){var t=s[n.current];t.a(),t[e]()}function o(e,t){void 0!==e&&(s[e].s(),s[e][t]())}this.runPositiveSwipedXActions=function(){var e,t=n.previous;void 0===t?r("z"):(r("p"),e=n.next,i.changeTo(t),t=n.previous,a.d(t),a.b(e),r("z"),o(t,"ne"))},this.runNegativeSwipedXActions=function(){var e,t=n.next;void 0===t?r("z"):(r("ne"),e=n.previous,i.changeTo(t),t=n.next,a.d(t),a.b(e),r("z"),o(t,"p"))}}function M(e,t){e.contains(t)&&e.removeChild(t)}function T(e){var t=e.core.lightboxCloser,i=e.elements,s=e.resolve,n=e.sourcePointerProps,a=s(k);this.runNoSwipeActions=function(){M(i.container,i.slideSwipingHoverer),n.isSourceDownEventTarget||t.closeLightbox(),n.isPointering=!1},this.runActions=function(){0<n.swipedX?a.runPositiveSwipedXActions():a.runNegativeSwipedXActions(),M(i.container,i.slideSwipingHoverer),i.container.classList.remove(o),n.isPointering=!1}}function he(e){var t=e.resolve,i=e.sourcePointerProps,s=t(T);this.listener=function(){i.isPointering&&(i.swipedX?s.runActions():s.runNoSwipeActions())}}function fe(e){var t=this,i=e.core,s=i.eventsDispatcher,n=i.globalEventsController,a=i.scrollbarRecompensor,r=e.data,o=e.elements,l=e.fs,d=e.props,c=e.sourcePointerProps;this.isLightboxFadingOut=!1,this.runActions=function(){t.isLightboxFadingOut=!0,o.container.classList.add(h),n.removeListeners(),d.exitFullscreenOnClose&&r.ifs&&l.x(),setTimeout(function(){t.isLightboxFadingOut=!1,c.isPointering=!1,o.container.classList.remove(h),document.documentElement.classList.remove(b),a.removeRecompense(),document.body.removeChild(o.container),s.dispatch("onClose")},270)}}function pe(e,t){e=e.classList;e.contains(t)&&e.remove(t)}function C(J){var l=J.componentsServices,e=J.core,G=e.eventsDispatcher,d=e.globalEventsController,c=e.scrollbarRecompensor,u=e.sourceDisplayFacade,h=e.stageManager,f=e.windowResizeActioner,K=J.data,X=J.elements,p=(J.props,J.stageIndexes),m=J.sws;function g(){var e,t,s,n,a,r,i,o,l,d,c,u,h,f,p,m,g,b,v,y,x,w,E,L,S,_,D,A,k,M,T,C,O,I,N,F,B,R,P,H,V,q,W,Y;function j(e){h[e]&&(h[e](),delete h[e])}function z(){document.body.offsetHeight>innerHeight&&(document.body.style.marginRight=T.scrollbarWidth+"px")}function U(e){for(var t=0;t<Y.length;t++)document[e](Y[t],$)}function $(){document.fullscreenElement||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement?V.ofs():V.xfs()}K.i=!0,K.scrollbarWidth=function(){var e=document.createElement("div"),t=e.style,i=document.createElement("div");t.visibility="hidden",t.width="100px",t.msOverflowStyle="scrollbar",t.overflow="scroll",i.style.width="100%",document.body.appendChild(e);t=e.offsetWidth;e.appendChild(i);i=i.offsetWidth;return document.body.removeChild(e),t-i}(),N=(e=J).core.eventsDispatcher,t=e.props,N.dispatch=function(e){t[e]&&t[e]()},V=e.componentsServices,q=e.data,W=e.fs,Y=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],W.o=function(){V.ofs();var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()},W.x=function(){V.xfs(),document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},W.t=function(){q.ifs?W.x():W.o()},W.l=function(){U("addEventListener")},W.q=function(){U("removeEventListener")},I=e.core,N=I.globalEventsController,F=I.windowResizeActioner,B=e.fs,I=e.resolve,R=I(ce),P=I(ue),H=I(he),N.attachListeners=function(){document.addEventListener("pointermove",P.listener),document.addEventListener("pointerup",H.listener),addEventListener("resize",F.runActions),document.addEventListener("keydown",R.listener),B.l()},N.removeListeners=function(){document.removeEventListener("pointermove",P.listener),document.removeEventListener("pointerup",H.listener),removeEventListener("resize",F.runActions),document.removeEventListener("keydown",R.listener),B.q()},I=e.core.lightboxCloser,O=(0,e.resolve)(fe),I.closeLightbox=function(){O.isLightboxFadingOut||O.runActions()},T=e.data,(C=e.core.scrollbarRecompensor).addRecompense=function(){"complete"===document.readyState?z():addEventListener("load",function(){z(),C.addRecompense=z})},C.removeRecompense=function(){document.body.style.removeProperty("margin-right")},N=e.core,I=N.slideChangeFacade,k=N.slideIndexChanger,M=N.stageManager,1<e.props.sources.length?(I.changeToPrevious=function(){k.jumpTo(M.getPreviousSlideIndex())},I.changeToNext=function(){k.jumpTo(M.getNextSlideIndex())}):(I.changeToPrevious=function(){},I.changeToNext=function(){}),y=e.componentsServices,N=e.core,x=N.slideIndexChanger,w=N.sourceDisplayFacade,E=N.stageManager,N=e.elements,L=N.smw,S=N.sourceAnimationWrappers,_=e.isl,D=e.stageIndexes,A=e.sws,x.changeTo=function(e){D.current=e,E.updateStageIndexes(),y.setSlideNumber(e+1),w.displaySourcesWhichShouldBeDisplayed()},x.jumpTo=function(e){var s=D.previous,n=D.current,a=D.next,r=_[n],o=_[e];x.changeTo(e);for(var t=0;t<L.length;t++)L[t].d();A.d(n),A.c(),requestAnimationFrame(function(){requestAnimationFrame(function(){var e=D.previous,t=D.next;function i(){E.i(n)?n===D.previous?L[n].ne():n===D.next&&L[n].p():(L[n].h(),L[n].n())}r&&S[n].classList.add(ie),o&&S[D.current].classList.add(te),A.a(),void 0!==e&&e!==n&&L[e].ne(),L[D.current].n(),void 0!==t&&t!==n&&L[t].p(),A.b(s),A.b(a),_[n]?setTimeout(i,260):i()})})},I=e.core.sourcesPointerDown,N=e.elements,m=N.smw,g=N.sources,b=e.sourcePointerProps,v=e.stageIndexes,I.listener=function(e){"VIDEO"!==e.target.tagName&&e.preventDefault(),b.isPointering=!0,b.downScreenX=e.screenX,b.swipedX=0;var t=g[v.current];t&&t.contains(e.target)?b.isSourceDownEventTarget=!0:b.isSourceDownEventTarget=!1;for(var i=0;i<m.length;i++)m[i].d()},h=e.collections.sourcesRenderFunctions,I=e.core.sourceDisplayFacade,f=e.props,p=e.stageIndexes,I.displaySourcesWhichShouldBeDisplayed=function(){if(f.loadOnlyCurrentSource)j(p.current);else for(var e in p)j(p[e])},i=e.core.stageManager,I=e.elements,o=I.smw,l=I.sourceAnimationWrappers,d=e.isl,c=e.stageIndexes,(u=e.sws).a=function(){for(var e in c)o[c[e]].s()},u.b=function(e){void 0===e||i.i(e)||(o[e].h(),o[e].n())},u.c=function(){for(var e in c)u.d(c[e])},u.d=function(e){d[e]&&(pe(e=l[e],se),pe(e,te),pe(e,ie))},s=e.collections.sourceSizers,I=e.core.windowResizeActioner,n=e.data,a=e.elements.smw,r=e.stageIndexes,I.runActions=function(){innerWidth<992?n.maxSourceWidth=innerWidth:n.maxSourceWidth=.9*innerWidth,n.maxSourceHeight=.9*innerHeight;for(var e=0;e<a.length;e++)a[e].d(),s[e]&&s[e].adjustSize();var t=r.previous,i=r.next;void 0!==t&&a[t].ne(),void 0!==i&&a[i].p()},X.container=document.createElement("div"),X.container.className="".concat(Z,"container ").concat(Q," ").concat(se),(e=J.elements).slideSwipingHoverer=document.createElement("div"),e.slideSwipingHoverer.className="".concat(Z,"slide-swiping-hoverer ").concat(Q," ").concat(ee),le(J),function(e){var t=e.core.sourcesPointerDown,i=e.elements,s=e.props.sources,n=document.createElement("div");n.className="".concat(ee," ").concat(Q),i.container.appendChild(n),n.addEventListener("pointerdown",t.listener),i.sourceWrappersContainer=n;for(var a=0;a<s.length;a++)oe(e,a)}(J),1<J.props.sources.length&&(e=(I=J).core.slideChangeFacade,de(I,e.changeToPrevious,"previous","M18.271,9.212H3.615l4.184-4.184c0.306-0.306,0.306-0.801,0-1.107c-0.306-0.306-0.801-0.306-1.107,0L1.21,9.403C1.194,9.417,1.174,9.421,1.158,9.437c-0.181,0.181-0.242,0.425-0.209,0.66c0.005,0.038,0.012,0.071,0.022,0.109c0.028,0.098,0.075,0.188,0.142,0.271c0.021,0.026,0.021,0.061,0.045,0.085c0.015,0.016,0.034,0.02,0.05,0.033l5.484,5.483c0.306,0.307,0.801,0.307,1.107,0c0.306-0.305,0.306-0.801,0-1.105l-4.184-4.185h14.656c0.436,0,0.788-0.353,0.788-0.788S18.707,9.212,18.271,9.212z"),de(I,e.changeToNext,"next","M1.729,9.212h14.656l-4.184-4.184c-0.307-0.306-0.307-0.801,0-1.107c0.305-0.306,0.801-0.306,1.106,0l5.481,5.482c0.018,0.014,0.037,0.019,0.053,0.034c0.181,0.181,0.242,0.425,0.209,0.66c-0.004,0.038-0.012,0.071-0.021,0.109c-0.028,0.098-0.075,0.188-0.143,0.271c-0.021,0.026-0.021,0.061-0.045,0.085c-0.015,0.016-0.034,0.02-0.051,0.033l-5.483,5.483c-0.306,0.307-0.802,0.307-1.106,0c-0.307-0.305-0.307-0.801,0-1.105l4.184-4.185H1.729c-0.436,0-0.788-0.353-0.788-0.788S1.293,9.212,1.729,9.212z")),function(){for(var e,t=J.props.sources,i=J.resolve,s=i(ne),n=i(ae),a=i(re,[s,n]),r=0;r<t.length;r++)"string"==typeof t[r]?(e=a.getTypeSetByClientForIndex(r))?n.runActionsForSourceTypeAndIndex(e,r):(e=s.getSourceTypeFromLocalStorageByUrl(t[r]))?n.runActionsForSourceTypeAndIndex(e,r):a.retrieveTypeWithXhrForIndex(r):n.runActionsForSourceTypeAndIndex("custom",r)}(),G.dispatch("onInit")}J.open=function(){var e,i,t,s,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,a=p.previous,r=p.current,o=p.next;p.current=n,K.i||(i=(e=J).stageIndexes,t=e.core.stageManager,s=e.props.sources.length-1,t.getPreviousSlideIndex=function(){return 0===i.current?s:i.current-1},t.getNextSlideIndex=function(){return i.current===s?0:i.current+1},t.updateStageIndexes=0==s?function(){}:1==s?function(){0===i.current?(i.next=1,delete i.previous):(i.previous=0,delete i.next)}:function(){i.previous=t.getPreviousSlideIndex(),i.next=t.getNextSlideIndex()},t.i=s<=2?function(){return!0}:function(e){var t=i.current;if(0===t&&e===s||t===s&&0===e)return!0;e=t-e;return-1==e||0==e||1==e}),h.updateStageIndexes(),K.i?(m.c(),m.a(),m.b(a),m.b(r),m.b(o),G.dispatch("onShow")):g(),u.displaySourcesWhichShouldBeDisplayed(),l.setSlideNumber(n+1),document.body.appendChild(X.container),document.documentElement.classList.add(b),c.addRecompense(),d.attachListeners(),f.runActions(),X.smw[p.current].n(),G.dispatch("onOpen")}}function O(e,t,i){return(O=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct.bind():function(e,t,i){var s=[null];s.push.apply(s,t);s=new(Function.bind.apply(e,s));return i&&I(s,i.prototype),s}).apply(null,arguments)}function I(e,t){return(I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,s=new Array(t);i<t;i++)s[i]=e[i];return s}function F(){for(var u=document.getElementsByTagName("a"),e=0;e<u.length;e++)!function(i){if(!u[i].hasAttribute("data-fslightbox"))return;var e=u[i].hasAttribute("data-href")?u[i].getAttribute("data-href"):u[i].getAttribute("href");if(!e)return console.warn('The "data-fslightbox" attribute was set without the "href" attribute.');var s=u[i].getAttribute("data-fslightbox");fsLightboxInstances[s]||(fsLightboxInstances[s]=new FsLightbox);var t=null;"#"===e.charAt(0)?(t=document.getElementById(e.substring(1)).cloneNode(!0)).removeAttribute("id"):t=e,fsLightboxInstances[s].props.sources.push(t),fsLightboxInstances[s].elements.a.push(u[i]);var n=fsLightboxInstances[s].props.sources.length-1;u[i].onclick=function(e){e.preventDefault(),fsLightboxInstances[s].open(n)},c("types","data-type"),c("videosPosters","data-video-poster"),c("customClasses","data-class"),c("customClasses","data-custom-class");for(var a,r=["href","data-fslightbox","data-href","data-type","data-video-poster","data-class","data-custom-class"],o=u[i].attributes,l=fsLightboxInstances[s].props.customAttributes,d=0;d<o.length;d++)-1===r.indexOf(o[d].name)&&"data-"===o[d].name.substr(0,5)&&(l[n]||(l[n]={}),a=o[d].name.substr(5),l[n][a]=o[d].value);function c(e,t){u[i].hasAttribute(t)&&(fsLightboxInstances[s].props[e][n]=u[i].getAttribute(t))}}(e);var t=Object.keys(fsLightboxInstances);window.fsLightbox=fsLightboxInstances[t[t.length-1]]}"object"===("undefined"==typeof document?"undefined":s(document))&&((t=document.createElement("style")).className=i,t.appendChild(document.createTextNode(".fslightbox-absoluted{position:absolute;top:0;left:0}.fslightbox-fade-in{animation:fslightbox-fade-in .3s cubic-bezier(0,0,.7,1)}.fslightbox-fade-out{animation:fslightbox-fade-out .3s ease}.fslightbox-fade-in-strong{animation:fslightbox-fade-in-strong .3s cubic-bezier(0,0,.7,1)}.fslightbox-fade-out-strong{animation:fslightbox-fade-out-strong .3s ease}@keyframes fslightbox-fade-in{from{opacity:.65}to{opacity:1}}@keyframes fslightbox-fade-out{from{opacity:.35}to{opacity:0}}@keyframes fslightbox-fade-in-strong{from{opacity:.3}to{opacity:1}}@keyframes fslightbox-fade-out-strong{from{opacity:1}to{opacity:0}}.fslightbox-cursor-grabbing{cursor:grabbing}.fslightbox-full-dimension{width:100%;height:100%}.fslightbox-open{overflow:hidden;height:100%}.fslightbox-flex-centered{display:flex;justify-content:center;align-items:center}.fslightbox-opacity-0{opacity:0!important}.fslightbox-opacity-1{opacity:1!important}.fslightbox-scrollbarfix{padding-right:17px}.fslightbox-transform-transition{transition:transform .3s}.fslightbox-container{font-family:Arial,sans-serif;position:fixed;top:0;left:0;background:linear-gradient(rgba(30,30,30,.9),#000 1810%);touch-action:pinch-zoom;z-index:1000000000;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.fslightbox-container *{box-sizing:border-box}.fslightbox-svg-path{transition:fill .15s ease;fill:#ddd}.fslightbox-nav{height:45px;width:100%;position:absolute;top:0;left:0}.fslightbox-slide-number-container{display:flex;justify-content:center;align-items:center;position:relative;height:100%;font-size:15px;color:#d7d7d7;z-index:0;max-width:55px;text-align:left}.fslightbox-slide-number-container .fslightbox-flex-centered{height:100%}.fslightbox-slash{display:block;margin:0 5px;width:1px;height:12px;transform:rotate(15deg);background:#fff}.fslightbox-toolbar{position:absolute;z-index:3;right:0;top:0;height:100%;display:flex;background:rgba(35,35,35,.65)}.fslightbox-toolbar-button{height:100%;width:45px;cursor:pointer}.fslightbox-toolbar-button:hover .fslightbox-svg-path{fill:#fff}.fslightbox-slide-btn-container{display:flex;align-items:center;padding:12px 12px 12px 6px;position:absolute;top:50%;cursor:pointer;z-index:3;transform:translateY(-50%)}@media (min-width:476px){.fslightbox-slide-btn-container{padding:22px 22px 22px 6px}}@media (min-width:768px){.fslightbox-slide-btn-container{padding:30px 30px 30px 6px}}.fslightbox-slide-btn-container:hover .fslightbox-svg-path{fill:#f1f1f1}.fslightbox-slide-btn{padding:9px;font-size:26px;background:rgba(35,35,35,.65)}@media (min-width:768px){.fslightbox-slide-btn{padding:10px}}@media (min-width:1600px){.fslightbox-slide-btn{padding:11px}}.fslightbox-slide-btn-container-previous{left:0}@media (max-width:475.99px){.fslightbox-slide-btn-container-previous{padding-left:3px}}.fslightbox-slide-btn-container-next{right:0;padding-left:12px;padding-right:3px}@media (min-width:476px){.fslightbox-slide-btn-container-next{padding-left:22px}}@media (min-width:768px){.fslightbox-slide-btn-container-next{padding-left:30px}}@media (min-width:476px){.fslightbox-slide-btn-container-next{padding-right:6px}}.fslightbox-down-event-detector{position:absolute;z-index:1}.fslightbox-slide-swiping-hoverer{z-index:4}.fslightbox-invalid-file-wrapper{font-size:22px;color:#eaebeb;margin:auto}.fslightbox-video{object-fit:cover}.fslightbox-youtube-iframe{border:0}.fslightboxl{display:block;margin:auto;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:67px;height:67px}.fslightboxl div{box-sizing:border-box;display:block;position:absolute;width:54px;height:54px;margin:6px;border:5px solid;border-color:#999 transparent transparent transparent;border-radius:50%;animation:fslightboxl 1.2s cubic-bezier(.5,0,.5,1) infinite}.fslightboxl div:nth-child(1){animation-delay:-.45s}.fslightboxl div:nth-child(2){animation-delay:-.3s}.fslightboxl div:nth-child(3){animation-delay:-.15s}@keyframes fslightboxl{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}.fslightbox-source{position:relative;z-index:2;opacity:0}")),document.head.appendChild(t)),window.FsLightbox=function(){var s=this;this.props={sources:[],customAttributes:[],customClasses:[],types:[],videosPosters:[],slideDistance:.3},this.data={isFullscreenOpen:!1,maxSourceWidth:0,maxSourceHeight:0,scrollbarWidth:0},this.isl=[],this.sourcePointerProps={downScreenX:null,isPointering:!1,isSourceDownEventTarget:!1,swipedX:0},this.stageIndexes={},this.elements={a:[],container:null,slideSwipingHoverer:null,smw:[],sourceWrappersContainer:null,sources:[],sourceAnimationWrappers:[]},this.componentsServices={setSlideNumber:function(){}},this.resolve=function(e){var t,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return i.unshift(s),O(e,function(e){if(Array.isArray(e))return N(e)}(t=i)||function(){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}()||function(e){if(e){if("string"==typeof e)return N(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?N(e,void 0):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())},this.collections={sourceLoadHandlers:[],sourcesRenderFunctions:[],sourceSizers:[]},this.core={eventsDispatcher:{},globalEventsController:{},lightboxCloser:{},lightboxUpdater:{},scrollbarRecompensor:{},slideChangeFacade:{},slideIndexChanger:{},sourcesPointerDown:{},sourceDisplayFacade:{},stageManager:{},windowResizeActioner:{}},this.fs={},this.sws={},C(this),this.close=function(){return s.core.lightboxCloser.closeLightbox()}},window.fsLightboxInstances={},F(),window.refreshFsLightbox=function(){for(var e in fsLightboxInstances){var t=fsLightboxInstances[e].props;fsLightboxInstances[e]=new FsLightbox,fsLightboxInstances[e].props=t,fsLightboxInstances[e].props.sources=[],fsLightboxInstances[e].elements.a=[]}F()}}],s={},n.m=i,n.c=s,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(i,s,function(e){return t[e]}.bind(null,s));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0);function n(e){if(s[e])return s[e].exports;var t=s[e]={i:e,l:!1,exports:{}};return i[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var i,s}),function(u,i){i.utils=i.utils||{},i.utils.errorList=function(){function t(a,e){const t=a.querySelectorAll('[aria-invalid="true"]');let i=a.querySelector('[role="alert"]'),s=!!i&&i.dataset.completeMessage,r="",n="";t.length<1&&!s||(i||(i=o.createElement("div"),i.setAttribute("role","alert"),a.insertBefore(i,a.firstChild)),e||""===i.innerHTML?(t.forEach(function(s){if(s.id&&""!==s.id){let t=a.querySelector("label[for="+s.id+"]"),i=s.id+"--item",e="";if(t&&t.classList.contains(l.formCheckableLabel)&&(i=t.dataset.legend,t=a.querySelector("legend#"+t.dataset.legend)),!t){let e=s.closest("."+l.formGroup);e&&(t=e.querySelector("label"),i=e.id)}var n;t||(n=s.closest("."+l.formTableCell))&&(e=n.dataset.errorlabel,i=s.id),t&&""===e&&(s=t.textContent.split("*"),e=s[0]),e&&(r+='<li class="'+l.errorListItem+'"><a href="#'+i+'" class="'+l.errorListLink+'">'+e+"</a></li>")}}),n='<ul class="'+l.errorList+'">'+r+"</ul>"):(n=i.innerHTML,c(i)),u.setTimeout(function(){s?i.innerHTML="<div>"+n+"</div>":i.innerHTML='<div class="'+l.errorListBox+'"><p class="'+l.errorListMessage+'"><strong>'+d.JSMSG_ERROR_LABEL+":</strong> "+d.JSMSG_ERROR_MESSAGE+"</p>"+n+"</div>",i.id&&"#jumpmark"!==u.location.hash&&(u.location.hash="#"+i.id)},150))}const o=u.document,l={error:"form__error",errorListBox:"form__error-list-box",errorList:"form__error-list",errorListItem:"form__error-list-item",errorListLink:"form__error-list-link",errorListMessage:"form__error-list-text",alertMessage:"form__alert",formGroup:"form__group",formGroupError:"form__group--error",formTableCell:"form__table-cell",formCheckableLabel:"form__checkable-label"},e={form:".form--proposal"},d=i.labels||{},c=function(e){const t=e.querySelectorAll("."+l.errorListLink);t.forEach(function(e){let t=o.querySelector(e.hash),i;t&&(t.classList.add(l.error),t.setAttribute("aria-invalid","true"),i=t.closest("."+l.formGroup),i&&i.classList.add(l.formGroupError))})};return{show:function(){o.querySelectorAll(e.form).forEach(function(e){t(e)})},update:function(e){t(e,!0)}}}()}(this,this.OAP||{}),function(h,e){e.utils=e.utils||{},e.utils.modal=function(){const n=h.document,e={modal:"oap-modal",modalContent:"oap-modal-content",modalSubmit:"oap-modal-submit",modalCancel:"oap-modal-cancel",loader:"oap-loader"},a={warningAccepted:"warningAccepted"};let r,o,l,d,c,u;return o=n.getElementById(e.modal),l=n.getElementById(e.modalContent),d=n.getElementById(e.modalSubmit),c=n.getElementById(e.modalCancel),u=n.getElementById(e.loader),o&&n.body.appendChild(o),u&&n.body.appendChild(u),{show:function(e,t,i,s){o&&u&&(r&&r.destroy(),r=new h.A11yDialog(o),l&&(l.innerHTML=e),c&&(c.innerHTML=i),d&&(d.innerHTML=t),d&&(d.addEventListener("click",function(){s.dataset[a.warningAccepted]=1,r.hide(),n.activeElement.click(),u.style.display="flex"}),d.removeAttribute("disabled")),r.show())}}}()}(this,this.OAP||{}),function(e){e.utils=e.utils||{},e.utils.formatNumber=function(){const s={maximumFractionDigits:2,minimumFractionDigits:0},n={maximumFractionDigits:2,minimumFractionDigits:2};return{format:function(e){var t=Math.floor(e),i=e-t;return e=e&&!isNaN(t)?(0<i?new Intl.NumberFormat("de-DE",n):new Intl.NumberFormat("de-DE",s)).format(e):e}}}()}(this.OAP||{}),function(e,t){const s=e.document,i={countableAreas:"textarea[data-oap-maxlength]"},n={counterBox:"counter",countCurrent:"counter-current",maxedOut:"js-counter-max"},a={maxlength:"oapMaxlength"};const r=(t.labels||{}).JSMSG_CHARACTERS_REMAINING,o=function(e){let t=s.createElement("div");var i;return e.id&&""!==e.id&&(i=e.id+"-counter",t.id=i,e.setAttribute("aria-describedby",i)),t.innerHTML=r.replace("%s",'<span class="'+n.countCurrent+'"></span>'),t.classList.add(n.counterBox),e.parentNode.appendChild(t),{wrapper:t,countCurrent:t.querySelector("."+n.countCurrent)}},l=function(e,t){var i=[...e.value.replace(/[\n\r\t]/g,"")].length;t.countCurrent.innerText=e.dataset[a.maxlength]-i,i>=e.dataset[a.maxlength]?t.wrapper.classList.add(n.maxedOut):t.wrapper.classList.remove(n.maxedOut)};s.querySelectorAll(i.countableAreas).forEach(function(e){!function(e){const t=o(e);e.addEventListener("keyup",function(){l(e,t)}),l(e,t)}(e)})}(this,this.OAP||{}),function(e){const t=e.document,i={submitAccepted:".submit_accepted",submitButton:"#submit-proposal"};let s=!1,n=!1;n=t.querySelectorAll(i.submitAccepted),n.forEach(function(e){e.addEventListener("change",function(){s=!0,n.forEach(function(e){s=s&&e.checked}),t.querySelector(i.submitButton).disabled=!s})})}(this),function(e,t){const i=e.document,s={formattingField:".form__textfield--number"};i.querySelectorAll(s.formattingField).forEach(function(e){e.addEventListener("blur",function(){var e;""!==this.value.toString().trim()&&t.utils&&t.utils.formatNumber&&(e=this.value.toString().replace(/\./g,"").replace(/,/g,"."),this.value=t.utils.formatNumber.format(e))})})}(this,this.OAP||{}),function(e){const a=e.document,t={modifiableFormFields:"[data-oap-modificators]"},r={modificators:"oapModificators",type:"oapType",totalItems:"oapTotalItems",totalTriggers:"oapTotalTriggers",totalCarryover:"oapTotalCarryover"},i="oap-proposal-",n=",";let o=!1,s=0,l=[],d=[];const c=function(n,e,t){t.forEach(function(e){var t;if(("file"!==n.type&&"select-multiple"!==n.type&&(n.value=n.value.toString().trim()),"MODIFICATOR_TOTAL"===e)&&(void 0===n.dataset[r.totalItems]&&void 0!==n.dataset[r.totalTriggers]))for(const s of a.querySelectorAll(n.dataset[r.totalTriggers])){if(void 0===s.dataset[r.totalItems])return;let e=Number(s.dataset[r.totalCarryover]);for(t of s.dataset[r.totalItems].split(",")){var i=a.querySelector(t);e+=(i=i.value)?Number(i.toString().replace(/\./g,"").replace(/,/g,".")):0}s.value=e,s.dispatchEvent(new Event("blur"))}})},u=function(e){return e.id||(s+=1,e.id=i+s,i+s)};a.querySelectorAll(t.modifiableFormFields).forEach(function(e){!function(e){const t=e.dataset[r.type];var i=e.dataset[r.modificators].split(n);const s=[...new Set(i)];i=e.closest("form");i&&d.push(u(i)),e.addEventListener("blur",function(){c(e,t,s)}),"0"!==o&&c(e,t,s),l.push({formField:e,modificators:s,formId:i.id,type:t})}(e)})}(this),function(e,b){const v=e.document,r={validatableFormFields:"[data-oap-validat]",serverErrorList:"[data-oap-servererror]",enableDisabledElements:"[type=checkbox][disabled], [type=radiobutton][disabled], select[disabled]"},y={pseudoFileInput:"form__upload-value",errorMessage:"error-message",errorMessageLabel:"form__label-question--error",errorMessageItem:"error-message__item"},x={validate:"oapValidat",type:"oapType",maxlength:"oapMaxlength",minvalue:"oapMinvalue",maxvalue:"oapMaxvalue",greaterthanItem:"oapGreaterthanItem",greaterthanTriggers:"oapGreaterthanTriggers",greaterthanCarryover:"oapGreaterthanCarryover",lessthanItem:"oapLessthanItem",lessthanTriggers:"oapLessthanTriggers",lessthanCarryover:"oapLessthanCarryover",warningAccepted:"warningAccepted",showAlwaysModal:"oapShowmodal",modalText:"oapModaltext",modalSubmit:"oapModalsubmit",modalCancel:"oapModalcancel",serverError:"oapServererror",uploadresult:"oapUploadvalidation"},t={loader:"oap-loader"},o={loaderVisible:"flex"},w=b.labels||{},i="oap-proposal-",l=",",n='<svg class="form__icon form__icon--error" width="20" height="22" focusable="false" aria-hidden="true"> <use xlink:href="/_assets/d867b284b013b280ddc9dda86ad2fa21/Icons/sprite.svg#icon-error" x="0" y="0"/> </svg>';let d=!1,s=0,c=[],u=[],E={},h;function L(e){return!!e&&(e=e.toString().replace(/^(.{2})\.(.{2})\.(.{4})$/,"$3-$2-$1"),Date.parse(e))}function S(e,t,i,s){s&&Object.entries(s).forEach(function(e){t=t.replace(e[0],e[1])}),e.innerHTML+='<span class="'+y.errorMessageItem+'">'+n+t+"</span>",i.setAttribute("aria-invalid","true"),i.labelElement&&i.labelElement.classList.add(y.errorMessageLabel)}const f=function(f,p,e,m){let g={critical:!0,relaxed:!0};return f.removeAttribute("aria-invalid"),f.labelElement&&f.labelElement.classList.remove(y.errorMessageLabel),m.innerHTML="",e.forEach(function(e){"file"!==f.type&&"select-multiple"!==f.type&&(f.value=f.value.toString().trim());var i=f.value&&""!==f.value,s=!isNaN(Number(f.value));switch(e){case"VALIDATOR_MANDATORY":{let t=!0;switch(f.type){case"checkbox":case"radio":var n=v.querySelector("#"+f.id).closest(".form__group").querySelector(":scope legend").id;if(void 0===E[n]){const l=v.querySelector("#"+f.id).closest(".form__checkable-group").querySelectorAll("input.form__checkable");t=!1,l.forEach(function(e){e.checked&&(t=!0)}),E[n]=t}break;case"hidden":f.classList.contains(y.pseudoFileInput)&&(f.value&&""!==f.value||(t=!1));break;case"file":t=!0;break;default:f.value&&""!==f.value||(t=!1)}t||(S(m,w.JSMSG_MANDATORY,f),g.relaxed=!1);break}case"VALIDATOR_MAXCHAR":f.dataset[x.maxlength]-[...f.value.replace(/[\n\r\t]/g,"")].length<0&&(S(m,w.JSMSG_MAX_LEN_EXCEEDED,f),g.critical=!1);break;case"VALIDATOR_INTEGER":i&&!Number.isInteger(Number(f.value.toString().replace(/\./g,"").replace(/,/g,".")))&&(S(m,w.JSMSG_NO_INTEGER,f),g.critical=!1);break;case"VALIDATOR_FLOAT":i&&!Number.isFinite(Number(f.value.toString().replace(/\./g,"").replace(/,/g,".")))&&(S(m,w.JSMSG_NO_FLOAT,f),g.critical=!1);break;case"VALIDATOR_MINVALUE":if(!i)break;switch(p){case"TYPE_DATE1":case"TYPE_DATE2":L(f.value)<L(f.dataset[x.minvalue])&&(g.critical=!1);break;case"TYPE_UPLOAD":f.classList.contains(y.pseudoFileInput)&&""!==f.value&&f.value.split(",").length<f.dataset[x.minvalue]&&(g.critical=!0,S(m,w.JSMSG_MIN_VALUE,f,{"%d":f.dataset[x.minvalue]}));break;default:var t=f.value.toString().replace(/\./g,"").replace(/,/g,".");(!s||Number(t)<f.dataset[x.minvalue])&&(g.critical=!1)}if(!g.critical){let e=f.dataset[x.minvalue];b.utils&&b.utils.formatNumber&&(e=b.utils.formatNumber.format(f.dataset[x.minvalue])),S(m,w.JSMSG_MIN_VALUE,f,{"%d":e})}break;case"VALIDATOR_MAXVALUE":switch(p){case"TYPE_DATE1":case"TYPE_DATE2":var a=L(f.value);L(f.dataset[x.maxvalue])<a&&(g.critical=!1);break;case"TYPE_UPLOAD":f.classList.contains(y.pseudoFileInput)&&""!==f.value&&f.value.split(",").length>f.dataset[x.maxvalue]&&(g.critical=!1);break;default:a=f.value.toString().replace(/\./g,"").replace(/,/g,".");(!s||Number(a)>f.dataset[x.maxvalue])&&(g.critical=!1)}if(!g.critical){let e=f.dataset[x.maxvalue];b.utils&&b.utils.formatNumber&&(e=b.utils.formatNumber.format(e)),S(m,w.JSMSG_MAX_VALUE,f,{"%d":e})}break;case"VALIDATOR_EMAIL":i&&!/^\S+@\S+\.\S+$/.test(f.value)&&(S(m,w.JSMSG_INVALID_EMAIL,f),g.critical=!1);break;case"VALIDATOR_PHONE":i&&!/^[0-9\s()+-]*$/.test(f.value)&&(S(m,w.JSMSG_INVALID_PHONE,f),g.critical=!1);break;case"VALIDATOR_FILE":if("file"!==f.type){let e=f.dataset[x.uploadresult];e.includes("size")&&(S(m,w.JSMSG_UPLOAD_ERROR_FILE_SIZE_SIMPLE,f),g.critical=!1),e.includes("max")&&(S(m,w.JSMSG_UPLOAD_MAX_FILES_REACHED,f),g.critical=!1),e.includes("min")&&(S(m,w.JSMSG_UPLOAD_MIN_FILES_REACHED,f),g.critical=!1)}break;case"VALIDATOR_GREATERTHAN":{if(void 0!==f.dataset[x.greaterthanTriggers]){for(const d of v.querySelectorAll(f.dataset[x.greaterthanTriggers]))d.dispatchEvent(new Event("blur"));break}let t,e=!0;if(void 0!==f.dataset[x.greaterthanItem]){const c=v.querySelector(f.dataset[x.greaterthanItem]);t=Number(c.value.toString().replace(/\./g,"").replace(/,/g,"."))}else void 0!==f.dataset[x.greaterthanCarryover]&&(t=Number(f.dataset[x.greaterthanCarryover]));switch(p){case"TYPE_DATE1":case"TYPE_DATE2":break;default:var r=Number(f.value.toString().replace(/\./g,"").replace(/,/g,"."));i&&(!s||r<t)&&(e=!1)}if(!e){let e=t;b.utils&&b.utils.formatNumber&&(e=b.utils.formatNumber.format(e)),S(m,w.JSMSG_MIN_VALUE,f,{"%d":e})}break}case"VALIDATOR_LESSTHAN":{if(void 0!==f.dataset[x.lessthanTriggers]){for(const u of v.querySelectorAll(f.dataset[x.lessthanTriggers]))u.dispatchEvent(new Event("blur"));break}let t,e=!0;if(void 0!==f.dataset[x.lessthanItem]){const h=v.querySelector(f.dataset[x.lessthanItem]);t=Number(h.value.toString().replace(/\./g,"").replace(/,/g,"."))}else void 0!==f.dataset[x.lessthanCarryover]&&(t=Number(f.dataset[x.lessthanCarryover]));switch(p){case"TYPE_DATE1":case"TYPE_DATE2":break;default:var o=Number(f.value.toString().replace(/\./g,"").replace(/,/g,"."));i&&(!s||o>t)&&(e=!1)}if(!e){let e=t;b.utils&&b.utils.formatNumber&&(e=b.utils.formatNumber.format(e)),S(m,w.JSMSG_MAX_VALUE,f,{"%d":e})}break}}}),g},p=function(e,t){let i=v.createElement("div");var s,n;return i.classList.add(y.errorMessage),t.id&&""!==t.id&&(s=t.getAttribute("aria-describedby"),n=t.id+"-error",i.id=n,t.setAttribute("aria-describedby",(s?s+" ":"")+n)),e.appendChild(i),i},m=function(e){return e.id||(s+=1,e.id=i+s,i+s)};var a;(a=v.querySelector(r.serverErrorList))&&(d=a.dataset[x.serverError],v.querySelectorAll(r.validatableFormFields).forEach(function(e){!function(e){const t=e.dataset[x.type];var i=e.dataset[x.validate].split(l);const s=[...new Set(i)];let n=e.closest("label")||e.parentNode;"TYPE_CHECKBOX"!==t&&"TYPE_RADIOBUTTON"!==t||(n=e.closest(".form__checkable-group"));const a=p(n,e);i=e.closest("form");i&&u.push(m(i)),e.labelElement=v.querySelector('[for="'+e.id+'"]'),"TYPE_CHECKBOX"!==t&&"TYPE_RADIOBUTTON"!==t||(e.labelElement=v.querySelector("#"+e.labelElement.dataset.legend)),e.addEventListener("blur",function(){E={},f(e,t,s,a)}),"0"!==d&&f(e,t,s,a),c.push({formField:e,validators:s,messageBox:a,formId:i.id,type:t})}(e)}),b.utils&&b.utils.errorList&&b.utils.errorList.show(),v.querySelectorAll("form").forEach(function(e){var a;u.includes(e.id)&&(a=e).addEventListener("submit",function(e){if(v.activeElement&&v.activeElement.classList.contains("datepicker-input"))e.preventDefault();else{let t={critical:!0,relaxed:!0};if(c.forEach(function(e){e.formId&&((e=f(e.formField,e.type,e.validators,e.messageBox)).critical||(t.critical=!1),e.relaxed||(t.relaxed=!1))}),t.critical)if(!t.relaxed&&!a.dataset[x.warningAccepted]||a.dataset[x.showAlwaysModal]){var i,s,n;e.preventDefault(),b.utils&&b.utils.modal&&(i=w[e.submitter.dataset[x.modalText]],s=w[e.submitter.dataset[x.modalSubmit]],n=w[e.submitter.dataset[x.modalCancel]],b.utils.modal.show(i,s,n,a))}else{if(!h)return;h.style.display=o.loaderVisible}else e.preventDefault(),b.utils&&b.utils.errorList&&b.utils.errorList.update(a);v.querySelectorAll(r.enableDisabledElements).forEach(function(e){e.disabled=0})}})}),h=v.getElementById(t.loader))}(this,this.OAP||{}),function(e,n){const t=e.document,a=n.labels||{},i={modalLinks:".modal__link"},r={modalText:"oapModaltext",modalSubmit:"oapModalsubmit",modalCancel:"oapModalcancel",warningAccepted:"warningAccepted"};t.querySelectorAll(i.modalLinks).forEach(function(s){s.addEventListener("click",function(e){var t,i;s.dataset[r.warningAccepted]||(e.preventDefault(),n.utils&&n.utils.modal&&(t=a[s.dataset[r.modalText]],i=a[s.dataset[r.modalSubmit]],e=a[s.dataset[r.modalCancel]],n.utils.modal.show(t,i,e,s)))})})}(this,this.OAP||{}),function(e){const t=e.document,n={dateFormFields:"[data-oap-datepicker]",dateRangeFields:"[data-oap-daterangepicker]",datePickerIcon:".form__icon--datepicker"},a={datePicker:"oapDatepicker",dateRangePicker:"oapDaterangepicker"};t.querySelectorAll(n.dateFormFields).forEach(function(e){var t=e.dataset[a.datePicker],t=JSON.parse(t);let i=new Datepicker(e,t),s=e.parentElement.querySelector(n.datePickerIcon);s&&s.addEventListener("click",function(){i.show()})}),t.querySelectorAll(n.dateRangeFields).forEach(function(e){var t=e.dataset[a.dateRangePicker],t=JSON.parse(t);let i=new DateRangePicker(e,t);i.datepickers.forEach(function(e){let t=e.element.parentElement.querySelector(n.datePickerIcon);t&&t.addEventListener("click",function(){e.show()})})})}(this),function(e){function t(e){var t=e.select.dataset[n.maxvalue];e.select.querySelectorAll("[selected]").length>=t?(e.add_button.disabled=!0,e.availableList.classList.add(a.disabled)):(e.add_button.disabled=!1,e.availableList.classList.remove(a.disabled))}const i=e.document,s={duallistboxFields:"[data-oap-duallistbox]"},n={dualListBox:"oapDuallistbox",maxvalue:"oapMaxvalue"},a={removedField:"dual-listbox__removed",disabled:"js-disabled"},r=function(e){e.addEventListener("added",function(){t(e)}),e.addEventListener("removed",function(){t(e)}),t(e)};i.querySelectorAll(s.duallistboxFields).forEach(function(e){!function(e){var t=e.dataset[n.dualListBox],t=JSON.parse(t);let i=new DualListbox(e,t);i.search_left.setAttribute("type","text"),i.search_right.setAttribute("type","text"),i.search_right.classList.add(a.removedField),i.add_all_button.remove(),i.remove_all_button.remove(),e.disabled&&(i.add_button.disabled=!0,i.remove_button.disabled=!0,i.availableList.classList.add(a.disabled),i.selectedList.classList.add(a.disabled)),e.dataset[n.maxvalue]&&r(i)}(e)})}(this),function(e,t){function w(e,t=0){if(0===e)return"0 Bytes";var i=t<0?0:t,t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(i))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][t]}const E=e.document,L=t.labels||{},S={base:"/index.php?",taskInfo:"oap-ajax-task=info",taskUpload:"oap-ajax-task=upload"},_={removeItemButton:"form__upload-btn-remove-file",downloadItemButton:"form__upload-btn-download-file"},D={uploadElement:"[data-oap-upload]",addButton:".form__add-file-button",uploadButton:".form__upload-file-button",clearStageButton:".form__upload-file-clear-button",removeItemButton:"."+_.removeItemButton,uploadList:".form__upload-list",uploadValue:".form__upload-value",fileList:".form__upload-fileslist",uploadMsg:".form__upload-msgbox",preUpload:".form__pre-upload",fileElement:'[type="file"]',form:'[name="proposal"]',fileListItem:".form__upload-filesitem",fileListStaged:".form__upload-staged",fileListStagedLabel:".form__upload-staged-label",errorList:".error-message"},A={upload:"oapUpload",savedFiles:"oapSavedfiles",propertyKey:"oapPropertykey",proposal:"oapProposal",uploadResult:"oapUploadvalidation"},k={listStart:'<ul class="form__upload-fileslist">',listEnd:"</ul>",listItemStart:'<li class="form__upload-filesitem">',listItemEnd:"</li>",messageOkStart:'<span class="form__upload-message form__upload-message--ok">',messageKoStart:'<span class="form__upload-message form__upload-message--error">',messageEnd:"</span>",listBtnDelete:'<svg class="form__icon form__icon--delete" width="18" height="18" focusable="false" aria-hidden="true"><use xlink:href="/_assets/d867b284b013b280ddc9dda86ad2fa21/Icons/sprite.svg#icon-delete" x="0" y="0"></use></svg>',listBtnDownload:'<svg class="form__icon form__icon--download" width="18" height="18" focusable="false" aria-hidden="true"><use xlink:href="/_assets/d867b284b013b280ddc9dda86ad2fa21/Icons/sprite.svg#icon-download" x="0" y="0"></use></svg>',errorSVG:'<svg class="form__icon form__icon--error" width="18" height="18" focusable="false" aria-hidden="true"><use xlink:href="/_assets/d867b284b013b280ddc9dda86ad2fa21/Icons/sprite.svg#icon-error" x="0" y="0"></use></svg>',stagedFile:'<svg class="form__icon form__icon--uploaded" width="18" height="18" focusable="false" aria-hidden="true"><use xlink:href="/_assets/d867b284b013b280ddc9dda86ad2fa21/Icons/sprite.svg#icon-file-uploaded" x="0" y="0"></use></svg>'};E.querySelectorAll(D.uploadElement).forEach(function(a){var e=a.dataset[A.upload];const r=parseInt(JSON.parse(e).maxFiles),n=parseInt(JSON.parse(e).maxSize),o=a.querySelector(D.fileElement),t=a.querySelector(D.uploadList),i=a.querySelector(D.errorList),l=a.querySelector(D.preUpload),d=a.querySelector(D.uploadMsg),c=a.querySelector(D.fileListStaged),u=a.querySelector(D.fileListStagedLabel),h=a.querySelector(D.uploadValue),f=a.querySelector(D.addButton),p=a.querySelector(D.uploadButton);let m=new FormData,g=[];function b(t){g.length=0;let i=h.value.split(",");for(let e=0;e<i.length;e++)i[e]===t.value&&(i.splice(e,1),e-=1);h.value=i.join(","),i.length<r&&(f.style.display="block"),t.closest(D.fileListItem).remove(),g.push({text:k.messageOkStart+L.JSMSG_UPLOAD_FILE_REMOVED+k.messageEnd,error:0}),x()}function v(){o.value="",l.style.display="none",t&&(t.innerHTML=""),g.length=0,i&&(i.innerHTML=""),h.removeAttribute("aria-invalid"),h.dataset[A.uploadResult]="",y(),x()}const y=function(){var e=function(e){let t=e.value.split(",").length;return""===e.value&&(t=0),t}(h);f.hasAttribute("disabled")&&f.removeAttribute("disabled"),o.files.length+e>r&&(h.dataset[A.uploadResult]="max",h.setAttribute("aria-invalid","true"),g.push({text:k.messageKoStart+L.JSMSG_UPLOAD_ERROR_TOO_MANY_FILES+k.messageEnd,error:1})),o.files.length+e>r&&f.setAttribute("disabled","disabled")},x=function(){if(d.innerHTML="",p.hasAttribute("disabled")&&p.removeAttribute("disabled"),0<g.length){let t="<ul>";for(let e=0;e<g.length;e++)t+="<li>"+g[e].text+"</li>",1!==g[e].error||p.hasAttribute("disabled")||p.setAttribute("disabled","disabled");t+="</ul>",d.innerHTML=t,g.length=0}};a.querySelectorAll(D.removeItemButton).forEach(function(e){e.addEventListener("click",function(){b(e,h),y()})}),a.querySelector(D.clearStageButton).addEventListener("click",function(){v()}),f.addEventListener("click",function(){o.click()},!1),o.addEventListener("change",function(){let i=k.listStart,s="";d.innerHTML="";for(let e=0,t=o.files;e<o.files.length;e++)m.append("file-"+[...m.keys()].length,t[e],t[e].name),t[e].size>n&&(s=k.messageKoStart+k.errorSVG+k.messageEnd,o.dataset[A.uploadResult]="size",h.hasAttribute("aria-invalid")||h.setAttribute("aria-invalid","true"),g.push({text:k.messageKoStart+k.errorSVG+" "+L.JSMSG_UPLOAD_ERROR_FILE_SIZE.replace("%1",w(n))+k.messageEnd,error:1}),p.setAttribute("disabled","disabled")),i+=k.listItemStart+s+" "+t[e].name+" ("+w(t[e].size)+") "+k.listItemEnd;i+=k.listEnd,t.innerHTML=i,l.style.display="block",y(),x()}),p.addEventListener("click",function(){var i=o.files.length;if(d.innerHTML="",0<i){p.hasAttribute("disabled")||p.setAttribute("disabled","disabled");var s=a.closest(D.form).dataset[A.proposal],n=a.dataset[A.propertyKey];let t=new FormData;for(let e=0;e<i;e++)t.append("files[]",o.files[e]);let e=new XMLHttpRequest;n=S.base+S.taskUpload+"&proposal="+s+"&answer="+n;e.open("POST",n,!0),e.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var s=JSON.parse(this.responseText);v();for(let t=0,i=s.data.files;t<s.data.files.length;t++){let e=E.createElement("li");e.setAttribute("class","form__upload-filesitem");var n=function(e,t,i){let s=E.createElement("button");return s.setAttribute("value",e[t].uid),s.setAttribute("class",_.removeItemButton),s.setAttribute("type","button"),s.setAttribute("title","Remove file"),s.innerHTML=k.listBtnDelete,s.addEventListener("click",function(){i(s,s.value)}),s}(i,t,b),a=function(e,t){let i=E.createElement("a");return i.setAttribute("href",e[t].url),i.setAttribute("target","_blank"),i.setAttribute("class",_.downloadItemButton),i.innerHTML=k.listBtnDownload,i}(i,t);e.innerHTML=k.stagedFile+" "+i[t].name+" ("+w(i[t].size)+")",e.append(n),e.append(a),c.style.display="block",u.style.display="block",c.appendChild(e)}g.push({text:k.messageOkStart+L.JSMSG_UPLOAD_UPLOADED+k.messageEnd,error:0});let e=h.value.split(",");""===h.value&&(e.length=0);let t=[...e,...s.data.ids];t.length>=r&&(h.setAttribute("aria-invalid","false"),f.style.display="none",g.push({text:L.JSMSG_UPLOAD_MAX_FILES_REACHED,error:0}));var i=t.join(",");h.setAttribute("value",i),x()}p.hasAttribute("disabled")&&p.removeAttribute("disabled")},e.send(t)}}),y()})}(this,this.OAP||{}),function(e){const t=e.document,n={checkableGroupWithAdditionalValue:".form__checkable-group--additionalvalue",checkableItem:".form__checkable-label input.form__checkable",additionalInput:".form__textfield"};t.querySelectorAll(n.checkableGroupWithAdditionalValue).forEach(function(e){let t=e.querySelector(n.additionalInput),i=e.querySelectorAll(n.checkableItem),s=i[i.length-1];t.disabled=!s.checked,"radio"===s.type&&i.forEach(function(e){e.addEventListener("change",function(){t.disabled=!s.checked})}),"checkbox"===s.type&&s.addEventListener("change",function(){t.disabled=!s.checked})})}(this);
